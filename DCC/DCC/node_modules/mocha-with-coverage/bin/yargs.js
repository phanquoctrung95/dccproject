'use strict';

var yargs = require('yargs'),
    fs = require('fs'),
    pkg = require('../package.json');

const OPTIONS = {
    mocha: {
        describe: 'Mocha options',
        default: {}
    },
    istanbul: {
        describe: 'Istanbul options',
        default: {}
    },
    sources: {
        array: true,
        describe: 'Source files',
        default: []
    },
    tests: {
        array: true,
        describe: 'Test files',
        default: []
    }
};

module.exports = yargs
    .help('help').describe('help', 'Display basic usage information')
    .env('MOCHA_WITH_COVERAGE')
    .detectLocale(false)
    .wrap(yargs.terminalWidth())
    .version()
    .usage(`${pkg.name} v${pkg.version}, (c) ${pkg.author.name} <${pkg.author.email}>`)
    .options(OPTIONS)
    .pkgConf('mocha-with-coverage', process.cwd())
    .config('config', path => JSON.parse(fs.readFileSync(path)))
    .strict();
