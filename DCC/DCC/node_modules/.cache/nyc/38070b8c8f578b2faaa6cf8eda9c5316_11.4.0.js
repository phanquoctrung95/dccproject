var cov_2ibqcp1j2q=function(){var path='D:\\DCC\\dcc\\server\\notification\\index.js',hash='d4106ed7972a19e34ee267f9f0903a98bb2efda4',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'D:\\DCC\\dcc\\server\\notification\\index.js',statementMap:{'0':{start:{line:1,column:12},end:{line:1,column:30}},'1':{start:{line:2,column:14},end:{line:2,column:34}},'2':{start:{line:3,column:13},end:{line:3,column:33}},'3':{start:{line:6,column:4},end:{line:41,column:7}},'4':{start:{line:7,column:26},end:{line:7,column:28}},'5':{start:{line:8,column:24},end:{line:8,column:26}},'6':{start:{line:9,column:24},end:{line:9,column:26}},'7':{start:{line:10,column:8},end:{line:15,column:9}},'8':{start:{line:11,column:12},end:{line:14,column:13}},'9':{start:{line:17,column:8},end:{line:33,column:9}},'10':{start:{line:18,column:12},end:{line:20,column:13}},'11':{start:{line:19,column:16},end:{line:19,column:47}},'12':{start:{line:21,column:12},end:{line:23,column:13}},'13':{start:{line:22,column:16},end:{line:22,column:45}},'14':{start:{line:24,column:12},end:{line:32,column:15}},'15':{start:{line:36,column:8},end:{line:37,column:69}},'16':{start:{line:37,column:12},end:{line:37,column:69}},'17':{start:{line:38,column:8},end:{line:39,column:63}},'18':{start:{line:39,column:12},end:{line:39,column:63}},'19':{start:{line:46,column:0},end:{line:46,column:22}}},fnMap:{'0':{name:'send',decl:{start:{line:5,column:9},end:{line:5,column:13}},loc:{start:{line:5,column:95},end:{line:43,column:1}},line:5},'1':{name:'(anonymous_1)',decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:6,column:40},end:{line:41,column:5}},line:6}},branchMap:{'0':{loc:{start:{line:5,column:85},end:{line:5,column:93}},type:'default-arg',locations:[{start:{line:5,column:92},end:{line:5,column:93}}],line:5},'1':{loc:{start:{line:18,column:12},end:{line:20,column:13}},type:'if',locations:[{start:{line:18,column:12},end:{line:20,column:13}},{start:{line:18,column:12},end:{line:20,column:13}}],line:18},'2':{loc:{start:{line:18,column:16},end:{line:18,column:97}},type:'binary-expr',locations:[{start:{line:18,column:16},end:{line:18,column:39}},{start:{line:18,column:43},end:{line:18,column:97}}],line:18},'3':{loc:{start:{line:21,column:12},end:{line:23,column:13}},type:'if',locations:[{start:{line:21,column:12},end:{line:23,column:13}},{start:{line:21,column:12},end:{line:23,column:13}}],line:21},'4':{loc:{start:{line:21,column:16},end:{line:21,column:95}},type:'binary-expr',locations:[{start:{line:21,column:16},end:{line:21,column:39}},{start:{line:21,column:43},end:{line:21,column:95}}],line:21},'5':{loc:{start:{line:36,column:8},end:{line:37,column:69}},type:'if',locations:[{start:{line:36,column:8},end:{line:37,column:69}},{start:{line:36,column:8},end:{line:37,column:69}}],line:36},'6':{loc:{start:{line:38,column:8},end:{line:39,column:63}},type:'if',locations:[{start:{line:38,column:8},end:{line:39,column:63}},{start:{line:38,column:8},end:{line:39,column:63}}],line:38}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0},f:{'0':0,'1':0},b:{'0':[0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var email=(cov_2ibqcp1j2q.s[0]++,require('./email'));var desktop=(cov_2ibqcp1j2q.s[1]++,require('./desktop'));var models=(cov_2ibqcp1j2q.s[2]++,require('../models'));function send(receivers,userId,subject,contentDesktop,contentEmail,link,stats,flag=(cov_2ibqcp1j2q.b[0][0]++,0)){cov_2ibqcp1j2q.f[0]++;cov_2ibqcp1j2q.s[3]++;models.User.getAllUsers(listUser=>{cov_2ibqcp1j2q.f[1]++;let arr_desktop=(cov_2ibqcp1j2q.s[4]++,[]);let arr_email=(cov_2ibqcp1j2q.s[5]++,[]);let hashTable=(cov_2ibqcp1j2q.s[6]++,[]);cov_2ibqcp1j2q.s[7]++;for(let i=0;i<listUser.length;i++){cov_2ibqcp1j2q.s[8]++;hashTable[listUser[i].email]={isNotificationEmail:listUser[i].isNotificationEmail,isNotificationDesktop:listUser[i].isNotificationDesktop};}cov_2ibqcp1j2q.s[9]++;for(let i=0;i<receivers.length;i++){cov_2ibqcp1j2q.s[10]++;if((cov_2ibqcp1j2q.b[2][0]++,hashTable[receivers[i]])&&(cov_2ibqcp1j2q.b[2][1]++,hashTable[receivers[i]].isNotificationDesktop===true)){cov_2ibqcp1j2q.b[1][0]++;cov_2ibqcp1j2q.s[11]++;arr_desktop.push(receivers[i]);}else{cov_2ibqcp1j2q.b[1][1]++;}cov_2ibqcp1j2q.s[12]++;if((cov_2ibqcp1j2q.b[4][0]++,hashTable[receivers[i]])&&(cov_2ibqcp1j2q.b[4][1]++,hashTable[receivers[i]].isNotificationEmail===true)){cov_2ibqcp1j2q.b[3][0]++;cov_2ibqcp1j2q.s[13]++;arr_email.push(receivers[i]);}else{cov_2ibqcp1j2q.b[3][1]++;}cov_2ibqcp1j2q.s[14]++;models.Notifications.create({email:receivers[i],userId:userId[i],title:subject,content:contentDesktop,time:new Date(),status:stats,reference:link});}cov_2ibqcp1j2q.s[15]++;if(arr_desktop.length>0){cov_2ibqcp1j2q.b[5][0]++;cov_2ibqcp1j2q.s[16]++;desktop.send(arr_desktop,subject,contentDesktop,link);}else{cov_2ibqcp1j2q.b[5][1]++;}cov_2ibqcp1j2q.s[17]++;if(arr_email.length>0){cov_2ibqcp1j2q.b[6][0]++;cov_2ibqcp1j2q.s[18]++;email.send(arr_email,subject,contentEmail,flag);}else{cov_2ibqcp1j2q.b[6][1]++;}});}cov_2ibqcp1j2q.s[19]++;module.exports=send;