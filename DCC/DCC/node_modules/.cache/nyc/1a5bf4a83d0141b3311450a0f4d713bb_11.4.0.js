var cov_1v2g8sjoos=function(){var path='D:\\DCC\\DCC\\server\\routes\\common\\course.js',hash='b8dec193437456c842c8fc01185834e1dbf2dcb8',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'D:\\DCC\\DCC\\server\\routes\\common\\course.js',statementMap:{'0':{start:{line:1,column:13},end:{line:1,column:40}},'1':{start:{line:2,column:13},end:{line:2,column:36}},'2':{start:{line:3,column:10},end:{line:3,column:47}},'3':{start:{line:5,column:0},end:{line:12,column:3}},'4':{start:{line:6,column:4},end:{line:11,column:7}},'5':{start:{line:7,column:8},end:{line:10,column:11}},'6':{start:{line:13,column:0},end:{line:21,column:3}},'7':{start:{line:14,column:4},end:{line:20,column:7}},'8':{start:{line:15,column:8},end:{line:19,column:11}},'9':{start:{line:22,column:0},end:{line:42,column:3}},'10':{start:{line:23,column:4},end:{line:41,column:5}},'11':{start:{line:32,column:27},end:{line:32,column:29}},'12':{start:{line:33,column:12},end:{line:35,column:13}},'13':{start:{line:34,column:16},end:{line:34,column:55}},'14':{start:{line:36,column:12},end:{line:39,column:15}},'15':{start:{line:43,column:0},end:{line:134,column:3}},'16':{start:{line:44,column:4},end:{line:44,column:52}},'17':{start:{line:45,column:4},end:{line:45,column:90}},'18':{start:{line:46,column:16},end:{line:56,column:5}},'19':{start:{line:57,column:4},end:{line:133,column:7}},'20':{start:{line:58,column:22},end:{line:58,column:24}},'21':{start:{line:59,column:8},end:{line:126,column:11}},'22':{start:{line:60,column:30},end:{line:60,column:32}},'23':{start:{line:61,column:35},end:{line:61,column:36}},'24':{start:{line:62,column:35},end:{line:62,column:36}},'25':{start:{line:63,column:33},end:{line:63,column:34}},'26':{start:{line:64,column:31},end:{line:64,column:32}},'27':{start:{line:65,column:32},end:{line:65,column:33}},'28':{start:{line:67,column:37},end:{line:67,column:38}},'29':{start:{line:68,column:37},end:{line:68,column:38}},'30':{start:{line:69,column:35},end:{line:69,column:36}},'31':{start:{line:71,column:12},end:{line:104,column:15}},'32':{start:{line:72,column:16},end:{line:72,column:31}},'33':{start:{line:73,column:16},end:{line:76,column:17}},'34':{start:{line:74,column:20},end:{line:74,column:67}},'35':{start:{line:75,column:20},end:{line:75,column:41}},'36':{start:{line:77,column:16},end:{line:80,column:17}},'37':{start:{line:78,column:20},end:{line:78,column:67}},'38':{start:{line:79,column:20},end:{line:79,column:41}},'39':{start:{line:81,column:16},end:{line:84,column:17}},'40':{start:{line:82,column:20},end:{line:82,column:63}},'41':{start:{line:83,column:20},end:{line:83,column:39}},'42':{start:{line:86,column:16},end:{line:91,column:17}},'43':{start:{line:90,column:20},end:{line:90,column:36}},'44':{start:{line:93,column:30},end:{line:102,column:17}},'45':{start:{line:103,column:16},end:{line:103,column:42}},'46':{start:{line:105,column:42},end:{line:105,column:92}},'47':{start:{line:106,column:42},end:{line:106,column:92}},'48':{start:{line:107,column:40},end:{line:107,column:86}},'49':{start:{line:108,column:30},end:{line:124,column:13}},'50':{start:{line:125,column:12},end:{line:125,column:38}},'51':{start:{line:127,column:23},end:{line:131,column:9}},'52':{start:{line:132,column:8},end:{line:132,column:27}},'53':{start:{line:138,column:0},end:{line:146,column:3}},'54':{start:{line:139,column:4},end:{line:145,column:6}},'55':{start:{line:140,column:8},end:{line:144,column:10}},'56':{start:{line:149,column:0},end:{line:157,column:3}},'57':{start:{line:150,column:4},end:{line:156,column:6}},'58':{start:{line:151,column:8},end:{line:155,column:10}},'59':{start:{line:159,column:0},end:{line:167,column:3}},'60':{start:{line:160,column:4},end:{line:166,column:6}},'61':{start:{line:161,column:8},end:{line:165,column:10}},'62':{start:{line:170,column:0},end:{line:170,column:24}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:5,column:32},end:{line:5,column:33}},loc:{start:{line:5,column:52},end:{line:12,column:1}},line:5},'1':{name:'(anonymous_1)',decl:{start:{line:6,column:45},end:{line:6,column:46}},loc:{start:{line:6,column:63},end:{line:11,column:5}},line:6},'2':{name:'(anonymous_2)',decl:{start:{line:13,column:29},end:{line:13,column:30}},loc:{start:{line:13,column:49},end:{line:21,column:1}},line:13},'3':{name:'(anonymous_3)',decl:{start:{line:14,column:33},end:{line:14,column:34}},loc:{start:{line:14,column:47},end:{line:20,column:5}},line:14},'4':{name:'(anonymous_4)',decl:{start:{line:22,column:39},end:{line:22,column:40}},loc:{start:{line:22,column:59},end:{line:42,column:1}},line:22},'5':{name:'(anonymous_5)',decl:{start:{line:31,column:8},end:{line:31,column:9}},loc:{start:{line:31,column:24},end:{line:40,column:9}},line:31},'6':{name:'(anonymous_6)',decl:{start:{line:43,column:35},end:{line:43,column:36}},loc:{start:{line:43,column:55},end:{line:134,column:1}},line:43},'7':{name:'(anonymous_7)',decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:56},end:{line:133,column:5}},line:57},'8':{name:'(anonymous_8)',decl:{start:{line:59,column:24},end:{line:59,column:25}},loc:{start:{line:59,column:43},end:{line:126,column:9}},line:59},'9':{name:'(anonymous_9)',decl:{start:{line:71,column:49},end:{line:71,column:50}},loc:{start:{line:71,column:64},end:{line:104,column:13}},line:71},'10':{name:'(anonymous_10)',decl:{start:{line:138,column:35},end:{line:138,column:36}},loc:{start:{line:138,column:55},end:{line:146,column:1}},line:138},'11':{name:'(anonymous_11)',decl:{start:{line:139,column:55},end:{line:139,column:56}},loc:{start:{line:139,column:69},end:{line:145,column:5}},line:139},'12':{name:'(anonymous_12)',decl:{start:{line:149,column:39},end:{line:149,column:40}},loc:{start:{line:149,column:59},end:{line:157,column:1}},line:149},'13':{name:'(anonymous_13)',decl:{start:{line:150,column:59},end:{line:150,column:60}},loc:{start:{line:150,column:73},end:{line:156,column:5}},line:150},'14':{name:'(anonymous_14)',decl:{start:{line:159,column:52},end:{line:159,column:53}},loc:{start:{line:159,column:72},end:{line:167,column:1}},line:159},'15':{name:'(anonymous_15)',decl:{start:{line:160,column:71},end:{line:160,column:72}},loc:{start:{line:160,column:85},end:{line:166,column:5}},line:160}},branchMap:{'0':{loc:{start:{line:73,column:16},end:{line:76,column:17}},type:'if',locations:[{start:{line:73,column:16},end:{line:76,column:17}},{start:{line:73,column:16},end:{line:76,column:17}}],line:73},'1':{loc:{start:{line:77,column:16},end:{line:80,column:17}},type:'if',locations:[{start:{line:77,column:16},end:{line:80,column:17}},{start:{line:77,column:16},end:{line:80,column:17}}],line:77},'2':{loc:{start:{line:81,column:16},end:{line:84,column:17}},type:'if',locations:[{start:{line:81,column:16},end:{line:84,column:17}},{start:{line:81,column:16},end:{line:84,column:17}}],line:81},'3':{loc:{start:{line:86,column:16},end:{line:91,column:17}},type:'if',locations:[{start:{line:86,column:16},end:{line:91,column:17}},{start:{line:86,column:16},end:{line:91,column:17}}],line:86},'4':{loc:{start:{line:86,column:20},end:{line:89,column:59}},type:'binary-expr',locations:[{start:{line:86,column:20},end:{line:86,column:52}},{start:{line:87,column:23},end:{line:87,column:57}},{start:{line:88,column:23},end:{line:88,column:55}},{start:{line:89,column:23},end:{line:89,column:59}}],line:86},'5':{loc:{start:{line:111,column:27},end:{line:111,column:77}},type:'cond-expr',locations:[{start:{line:111,column:50},end:{line:111,column:73}},{start:{line:111,column:76},end:{line:111,column:77}}],line:111},'6':{loc:{start:{line:112,column:29},end:{line:112,column:98}},type:'cond-expr',locations:[{start:{line:112,column:52},end:{line:112,column:81}},{start:{line:112,column:84},end:{line:112,column:98}}],line:112},'7':{loc:{start:{line:115,column:31},end:{line:115,column:118}},type:'cond-expr',locations:[{start:{line:115,column:54},end:{line:115,column:81}},{start:{line:115,column:84},end:{line:115,column:118}}],line:115}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0,0,0],'5':[0,0],'6':[0,0],'7':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var router=(cov_1v2g8sjoos.s[0]++,require('express').Router());var models=(cov_1v2g8sjoos.s[1]++,require('../../models'));var log=(cov_1v2g8sjoos.s[2]++,require('../../config/config')["log"]);cov_1v2g8sjoos.s[3]++;router.post('/getCourseDetail',function(req,res){cov_1v2g8sjoos.f[0]++;cov_1v2g8sjoos.s[4]++;models.Course.getByID(req.body.courseId,function(course){cov_1v2g8sjoos.f[1]++;cov_1v2g8sjoos.s[5]++;res.send({success:true,data:course});});});cov_1v2g8sjoos.s[6]++;router.post('/getAllCourse',function(req,res){cov_1v2g8sjoos.f[2]++;cov_1v2g8sjoos.s[7]++;models.Course.findAll().then(function(rs){cov_1v2g8sjoos.f[3]++;cov_1v2g8sjoos.s[8]++;res.send({success:true,msg:"send course detail list",data:rs});});});cov_1v2g8sjoos.s[9]++;router.post('/getRequesterByCourseID',function(req,res){cov_1v2g8sjoos.f[4]++;cov_1v2g8sjoos.s[10]++;models.RequestOpening.findAll({include:[{model:models.User}],where:{courseId:req.body.courseId}}).then(function(data){cov_1v2g8sjoos.f[5]++;var userList=(cov_1v2g8sjoos.s[11]++,[]);cov_1v2g8sjoos.s[12]++;for(let i=0;i<data.length;i++){cov_1v2g8sjoos.s[13]++;userList.push(data[i].dataValues.User);}cov_1v2g8sjoos.s[14]++;res.send({success:true,data:userList});});});cov_1v2g8sjoos.s[15]++;router.post('/getClassByCourseID',function(req,res){cov_1v2g8sjoos.f[6]++;cov_1v2g8sjoos.s[16]++;log.info('/common/course/getClassByCourseID: ');cov_1v2g8sjoos.s[17]++;console.log('----------------common/course/getClassByCourseID----------------------');var query=(cov_1v2g8sjoos.s[18]++,{include:[models.User,{model:models.ClassRecord,include:[models.User]}],where:{courseId:req.body.courseId}});cov_1v2g8sjoos.s[19]++;models.Class.findAll(query).then(function(classes){cov_1v2g8sjoos.f[7]++;var resData=(cov_1v2g8sjoos.s[20]++,[]);cov_1v2g8sjoos.s[21]++;classes.forEach(classByCourseId=>{cov_1v2g8sjoos.f[8]++;let traineeList=(cov_1v2g8sjoos.s[22]++,[]);let sumTrainerRating=(cov_1v2g8sjoos.s[23]++,0);let sumContentRating=(cov_1v2g8sjoos.s[24]++,0);let sumHappyRating=(cov_1v2g8sjoos.s[25]++,0);let countTrainee=(cov_1v2g8sjoos.s[26]++,0);let numOfFeedback=(cov_1v2g8sjoos.s[27]++,0);//3 biến sau đây là thừa, có thể dùng biến numOfFeedback thay thế
let countContentRating=(cov_1v2g8sjoos.s[28]++,0);let countTrainerRating=(cov_1v2g8sjoos.s[29]++,0);let countHappyRating=(cov_1v2g8sjoos.s[30]++,0);cov_1v2g8sjoos.s[31]++;classByCourseId.ClassRecords.forEach(classRecord=>{cov_1v2g8sjoos.f[9]++;cov_1v2g8sjoos.s[32]++;countTrainee++;cov_1v2g8sjoos.s[33]++;if(classRecord.trainer_rating!=null){cov_1v2g8sjoos.b[0][0]++;cov_1v2g8sjoos.s[34]++;sumTrainerRating+=classRecord.trainer_rating;cov_1v2g8sjoos.s[35]++;countTrainerRating++;}else{cov_1v2g8sjoos.b[0][1]++;}cov_1v2g8sjoos.s[36]++;if(classRecord.content_rating!=null){cov_1v2g8sjoos.b[1][0]++;cov_1v2g8sjoos.s[37]++;sumContentRating+=classRecord.content_rating;cov_1v2g8sjoos.s[38]++;countContentRating++;}else{cov_1v2g8sjoos.b[1][1]++;}cov_1v2g8sjoos.s[39]++;if(classRecord.happy_rating!=null){cov_1v2g8sjoos.b[2][0]++;cov_1v2g8sjoos.s[40]++;sumHappyRating+=classRecord.happy_rating;cov_1v2g8sjoos.s[41]++;countHappyRating++;}else{cov_1v2g8sjoos.b[2][1]++;}cov_1v2g8sjoos.s[42]++;if((cov_1v2g8sjoos.b[4][0]++,classRecord.happy_rating!=null)||(cov_1v2g8sjoos.b[4][1]++,classRecord.content_rating!=null)||(cov_1v2g8sjoos.b[4][2]++,classRecord.happy_rating!=null)||(cov_1v2g8sjoos.b[4][3]++,classRecord.improve_comments!=null)){cov_1v2g8sjoos.b[3][0]++;cov_1v2g8sjoos.s[43]++;numOfFeedback++;}else{cov_1v2g8sjoos.b[3][1]++;}let trainee=(cov_1v2g8sjoos.s[44]++,{traineeName:classRecord.User.username,traineeAvatar:classRecord.User.avatar,traineeMail:classRecord.User.email,bestThing_comment:classRecord.bestThing_comments,trainer_rating:classRecord.trainer_rating,improve_comment:classRecord.improve_comments,content_rating:classRecord.content_rating,happy_rating:classRecord.happy_rating});cov_1v2g8sjoos.s[45]++;traineeList.push(trainee);});const trainer_ratingAverage=(cov_1v2g8sjoos.s[46]++,(sumTrainerRating/countTrainerRating).toFixed(2));const content_ratingAverage=(cov_1v2g8sjoos.s[47]++,(sumContentRating/countContentRating).toFixed(2));const happy_ratingAverage=(cov_1v2g8sjoos.s[48]++,(sumHappyRating/countHappyRating).toFixed(2));let classDetail=(cov_1v2g8sjoos.s[49]++,{id:classByCourseId.id,location:classByCourseId.location,trainerId:classByCourseId.User?(cov_1v2g8sjoos.b[5][0]++,classByCourseId.User.id):(cov_1v2g8sjoos.b[5][1]++,1),trainerName:classByCourseId.User?(cov_1v2g8sjoos.b[6][0]++,classByCourseId.User.username):(cov_1v2g8sjoos.b[6][1]++,"Not Assigned"),startTime:classByCourseId.startTime,endTime:classByCourseId.endTime,trainerAvatar:classByCourseId.User?(cov_1v2g8sjoos.b[7][0]++,classByCourseId.User.avatar):(cov_1v2g8sjoos.b[7][1]++,"/img/profiles/defaultProfile.jpg"),traineeList:traineeList,maxAttendant:classByCourseId.maxAttendant,trainer_ratingAverage:trainer_ratingAverage,content_ratingAverage:content_ratingAverage,happy_ratingAverage:happy_ratingAverage,numTrainee:countTrainee,numOfFeedback:numOfFeedback,courseId:classByCourseId.courseId});cov_1v2g8sjoos.s[50]++;resData.push(classDetail);});// ket thuc forEach
var datasend=(cov_1v2g8sjoos.s[51]++,{success:true,msg:'send list success',data:resData});cov_1v2g8sjoos.s[52]++;res.send(datasend);});});// Get course by class id 
cov_1v2g8sjoos.s[53]++;router.post('/getCourseByClassID',function(req,res){cov_1v2g8sjoos.f[10]++;cov_1v2g8sjoos.s[54]++;models.Course.getCourseByClassID(req.body.classID,function(rs){cov_1v2g8sjoos.f[11]++;cov_1v2g8sjoos.s[55]++;res.send({success:true,msg:"Get all infomation about course by class id  ",data:rs});});});//Create API for conjob send email
cov_1v2g8sjoos.s[56]++;router.post('/getCourseNameByClassId',function(req,res){cov_1v2g8sjoos.f[12]++;cov_1v2g8sjoos.s[57]++;models.Course.getCourseNameByClassId(req.body.classID,function(rs){cov_1v2g8sjoos.f[13]++;cov_1v2g8sjoos.s[58]++;res.send({success:true,msg:"Get all infomation about course name by class id",data:rs});});});cov_1v2g8sjoos.s[59]++;router.post('/getCourseOfUserDontFeedbackByUserID',function(req,res){cov_1v2g8sjoos.f[14]++;cov_1v2g8sjoos.s[60]++;models.Course.getCourseOfUserDontFeedbackByUserID(req.body.userID,function(rs){cov_1v2g8sjoos.f[15]++;cov_1v2g8sjoos.s[61]++;res.send({success:true,msg:"Get all infomation about user dont feedback by userID",data:rs});});});cov_1v2g8sjoos.s[62]++;module.exports=router;