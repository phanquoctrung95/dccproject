var cov_lhgb54mom=function(){var path='D:\\DCC\\DCC\\server\\routes\\admin\\courses.js',hash='d39b5934deb4f8cdda4fc4bdbe1de13094765aa8',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'D:\\DCC\\DCC\\server\\routes\\admin\\courses.js',statementMap:{'0':{start:{line:1,column:13},end:{line:1,column:40}},'1':{start:{line:2,column:13},end:{line:2,column:36}},'2':{start:{line:3,column:10},end:{line:3,column:47}},'3':{start:{line:4,column:19},end:{line:4,column:48}},'4':{start:{line:5,column:10},end:{line:5,column:36}},'5':{start:{line:6,column:8},end:{line:6,column:29}},'6':{start:{line:7,column:10},end:{line:7,column:24}},'7':{start:{line:8,column:9},end:{line:8,column:22}},'8':{start:{line:10,column:0},end:{line:13,column:54}},'9':{start:{line:11,column:4},end:{line:11,column:47}},'10':{start:{line:13,column:4},end:{line:13,column:54}},'11':{start:{line:14,column:11},end:{line:14,column:29}},'12':{start:{line:17,column:0},end:{line:35,column:3}},'13':{start:{line:18,column:4},end:{line:34,column:6}},'14':{start:{line:26,column:24},end:{line:26,column:26}},'15':{start:{line:27,column:8},end:{line:29,column:9}},'16':{start:{line:28,column:12},end:{line:28,column:47}},'17':{start:{line:30,column:8},end:{line:33,column:11}},'18':{start:{line:38,column:0},end:{line:66,column:3}},'19':{start:{line:39,column:4},end:{line:65,column:7}},'20':{start:{line:43,column:8},end:{line:64,column:11}},'21':{start:{line:44,column:12},end:{line:63,column:13}},'22':{start:{line:45,column:16},end:{line:48,column:19}},'23':{start:{line:50,column:16},end:{line:62,column:23}},'24':{start:{line:58,column:24},end:{line:61,column:27}},'25':{start:{line:69,column:0},end:{line:99,column:3}},'26':{start:{line:70,column:4},end:{line:98,column:7}},'27':{start:{line:73,column:8},end:{line:97,column:11}},'28':{start:{line:74,column:12},end:{line:96,column:13}},'29':{start:{line:75,column:35},end:{line:82,column:17}},'30':{start:{line:83,column:16},end:{line:90,column:23}},'31':{start:{line:86,column:24},end:{line:89,column:27}},'32':{start:{line:92,column:16},end:{line:95,column:19}},'33':{start:{line:102,column:0},end:{line:119,column:3}},'34':{start:{line:103,column:4},end:{line:117,column:7}},'35':{start:{line:104,column:8},end:{line:116,column:9}},'36':{start:{line:105,column:12},end:{line:108,column:15}},'37':{start:{line:110,column:12},end:{line:115,column:15}},'38':{start:{line:111,column:16},end:{line:114,column:19}},'39':{start:{line:122,column:0},end:{line:131,column:3}},'40':{start:{line:123,column:4},end:{line:130,column:7}},'41':{start:{line:124,column:23},end:{line:128,column:9}},'42':{start:{line:129,column:8},end:{line:129,column:27}},'43':{start:{line:133,column:0},end:{line:158,column:3}},'44':{start:{line:135,column:16},end:{line:149,column:5}},'45':{start:{line:150,column:4},end:{line:157,column:7}},'46':{start:{line:151,column:23},end:{line:155,column:9}},'47':{start:{line:156,column:8},end:{line:156,column:27}},'48':{start:{line:161,column:0},end:{line:184,column:3}},'49':{start:{line:162,column:4},end:{line:162,column:90}},'50':{start:{line:164,column:4},end:{line:182,column:7}},'51':{start:{line:165,column:8},end:{line:181,column:9}},'52':{start:{line:166,column:12},end:{line:169,column:15}},'53':{start:{line:171,column:12},end:{line:180,column:19}},'54':{start:{line:176,column:20},end:{line:179,column:23}},'55':{start:{line:187,column:0},end:{line:211,column:3}},'56':{start:{line:188,column:4},end:{line:188,column:88}},'57':{start:{line:189,column:4},end:{line:210,column:7}},'58':{start:{line:190,column:8},end:{line:209,column:9}},'59':{start:{line:191,column:12},end:{line:201,column:19}},'60':{start:{line:197,column:20},end:{line:200,column:23}},'61':{start:{line:204,column:12},end:{line:208,column:15}},'62':{start:{line:214,column:0},end:{line:232,column:3}},'63':{start:{line:215,column:4},end:{line:215,column:35}},'64':{start:{line:216,column:4},end:{line:230,column:7}},'65':{start:{line:217,column:8},end:{line:229,column:9}},'66':{start:{line:218,column:12},end:{line:221,column:15}},'67':{start:{line:223,column:12},end:{line:228,column:15}},'68':{start:{line:224,column:16},end:{line:227,column:19}},'69':{start:{line:235,column:0},end:{line:253,column:3}},'70':{start:{line:237,column:16},end:{line:244,column:5}},'71':{start:{line:245,column:4},end:{line:252,column:7}},'72':{start:{line:246,column:23},end:{line:250,column:9}},'73':{start:{line:251,column:8},end:{line:251,column:27}},'74':{start:{line:255,column:0},end:{line:350,column:3}},'75':{start:{line:256,column:19},end:{line:256,column:21}},'76':{start:{line:257,column:19},end:{line:257,column:20}},'77':{start:{line:258,column:18},end:{line:258,column:19}},'78':{start:{line:260,column:4},end:{line:349,column:11}},'79':{start:{line:262,column:12},end:{line:262,column:78}},'80':{start:{line:264,column:12},end:{line:348,column:11}},'81':{start:{line:265,column:16},end:{line:268,column:17}},'82':{start:{line:269,column:16},end:{line:269,column:42}},'83':{start:{line:270,column:19},end:{line:348,column:11}},'84':{start:{line:271,column:14},end:{line:274,column:15}},'85':{start:{line:275,column:14},end:{line:275,column:40}},'86':{start:{line:278,column:14},end:{line:347,column:17}},'87':{start:{line:279,column:18},end:{line:346,column:25}},'88':{start:{line:281,column:26},end:{line:345,column:27}},'89':{start:{line:282,column:30},end:{line:282,column:63}},'90':{start:{line:285,column:38},end:{line:344,column:41}},'91':{start:{line:286,column:42},end:{line:343,column:45}},'92':{start:{line:287,column:46},end:{line:342,column:47}},'93':{start:{line:288,column:61},end:{line:288,column:95}},'94':{start:{line:289,column:50},end:{line:295,column:51}},'95':{start:{line:290,column:54},end:{line:290,column:87}},'96':{start:{line:291,column:57},end:{line:295,column:51}},'97':{start:{line:292,column:54},end:{line:292,column:87}},'98':{start:{line:294,column:54},end:{line:294,column:87}},'99':{start:{line:296,column:50},end:{line:296,column:75}},'100':{start:{line:298,column:69},end:{line:298,column:137}},'101':{start:{line:300,column:50},end:{line:341,column:53}},'102':{start:{line:306,column:54},end:{line:340,column:55}},'103':{start:{line:308,column:76},end:{line:308,column:125}},'104':{start:{line:308,column:110},end:{line:308,column:124}},'105':{start:{line:309,column:73},end:{line:309,column:82}},'106':{start:{line:310,column:58},end:{line:312,column:59}},'107':{start:{line:311,column:62},end:{line:311,column:118}},'108':{start:{line:314,column:58},end:{line:314,column:103}},'109':{start:{line:314,column:94},end:{line:314,column:101}},'110':{start:{line:316,column:58},end:{line:339,column:61}},'111':{start:{line:317,column:62},end:{line:338,column:65}},'112':{start:{line:319,column:66},end:{line:337,column:67}},'113':{start:{line:320,column:70},end:{line:330,column:73}},'114':{start:{line:321,column:94},end:{line:321,column:214}},'115':{start:{line:322,column:88},end:{line:322,column:135}},'116':{start:{line:324,column:74},end:{line:324,column:93}},'117':{start:{line:325,column:74},end:{line:325,column:177}},'118':{start:{line:327,column:78},end:{line:327,column:235}},'119':{start:{line:329,column:74},end:{line:329,column:172}},'120':{start:{line:331,column:70},end:{line:335,column:72}},'121':{start:{line:336,column:71},end:{line:336,column:90}},'122':{start:{line:353,column:4},end:{line:353,column:74}},'123':{start:{line:357,column:0},end:{line:545,column:3}},'124':{start:{line:358,column:19},end:{line:358,column:21}},'125':{start:{line:359,column:19},end:{line:359,column:20}},'126':{start:{line:360,column:22},end:{line:360,column:24}},'127':{start:{line:361,column:22},end:{line:364,column:5}},'128':{start:{line:366,column:4},end:{line:544,column:11}},'129':{start:{line:368,column:12},end:{line:371,column:14}},'130':{start:{line:370,column:16},end:{line:370,column:30}},'131':{start:{line:373,column:12},end:{line:543,column:13}},'132':{start:{line:374,column:16},end:{line:377,column:17}},'133':{start:{line:378,column:16},end:{line:378,column:35}},'134':{start:{line:382,column:28},end:{line:389,column:17}},'135':{start:{line:390,column:16},end:{line:542,column:23}},'136':{start:{line:392,column:24},end:{line:392,column:45}},'137':{start:{line:393,column:24},end:{line:393,column:44}},'138':{start:{line:394,column:47},end:{line:411,column:25}},'139':{start:{line:413,column:24},end:{line:540,column:31}},'140':{start:{line:420,column:32},end:{line:539,column:33}},'141':{start:{line:421,column:50},end:{line:421,column:66}},'142':{start:{line:422,column:44},end:{line:536,column:47}},'143':{start:{line:423,column:48},end:{line:535,column:51}},'144':{start:{line:424,column:52},end:{line:534,column:53}},'145':{start:{line:425,column:67},end:{line:425,column:95}},'146':{start:{line:426,column:56},end:{line:426,column:89}},'147':{start:{line:427,column:56},end:{line:427,column:81}},'148':{start:{line:428,column:75},end:{line:438,column:57}},'149':{start:{line:440,column:56},end:{line:440,column:97}},'150':{start:{line:441,column:56},end:{line:441,column:106}},'151':{start:{line:442,column:56},end:{line:442,column:94}},'152':{start:{line:443,column:56},end:{line:443,column:94}},'153':{start:{line:446,column:80},end:{line:446,column:146}},'154':{start:{line:447,column:75},end:{line:447,column:131}},'155':{start:{line:448,column:78},end:{line:448,column:110}},'156':{start:{line:449,column:56},end:{line:451,column:57}},'157':{start:{line:450,column:60},end:{line:450,column:335}},'158':{start:{line:453,column:56},end:{line:485,column:57}},'159':{start:{line:455,column:60},end:{line:484,column:63}},'160':{start:{line:456,column:64},end:{line:483,column:67}},'161':{start:{line:462,column:68},end:{line:482,column:69}},'162':{start:{line:464,column:72},end:{line:474,column:75}},'163':{start:{line:471,column:76},end:{line:473,column:131}},'164':{start:{line:477,column:72},end:{line:480,column:73}},'165':{start:{line:481,column:72},end:{line:481,column:98}},'166':{start:{line:486,column:56},end:{line:523,column:57}},'167':{start:{line:488,column:60},end:{line:522,column:63}},'168':{start:{line:489,column:64},end:{line:521,column:67}},'169':{start:{line:496,column:68},end:{line:520,column:69}},'170':{start:{line:498,column:72},end:{line:517,column:75}},'171':{start:{line:505,column:76},end:{line:515,column:77}},'172':{start:{line:516,column:76},end:{line:516,column:292}},'173':{start:{line:519,column:72},end:{line:519,column:92}},'174':{start:{line:524,column:56},end:{line:528,column:57}},'175':{start:{line:529,column:56},end:{line:529,column:75}},'176':{start:{line:530,column:56},end:{line:530,column:75}},'177':{start:{line:531,column:56},end:{line:531,column:317}},'178':{start:{line:533,column:56},end:{line:533,column:75}},'179':{start:{line:538,column:36},end:{line:538,column:56}},'180':{start:{line:547,column:0},end:{line:565,column:3}},'181':{start:{line:548,column:4},end:{line:548,column:65}},'182':{start:{line:550,column:4},end:{line:564,column:7}},'183':{start:{line:553,column:8},end:{line:563,column:15}},'184':{start:{line:559,column:16},end:{line:562,column:19}},'185':{start:{line:568,column:0},end:{line:607,column:3}},'186':{start:{line:569,column:4},end:{line:605,column:11}},'187':{start:{line:572,column:12},end:{line:604,column:13}},'188':{start:{line:573,column:16},end:{line:591,column:23}},'189':{start:{line:576,column:24},end:{line:582,column:27}},'190':{start:{line:581,column:28},end:{line:581,column:47}},'191':{start:{line:583,column:24},end:{line:590,column:27}},'192':{start:{line:586,column:28},end:{line:589,column:31}},'193':{start:{line:593,column:16},end:{line:603,column:23}},'194':{start:{line:596,column:24},end:{line:602,column:27}},'195':{start:{line:597,column:28},end:{line:597,column:47}},'196':{start:{line:598,column:28},end:{line:601,column:31}},'197':{start:{line:609,column:0},end:{line:623,column:3}},'198':{start:{line:610,column:4},end:{line:622,column:7}},'199':{start:{line:616,column:23},end:{line:620,column:9}},'200':{start:{line:621,column:8},end:{line:621,column:27}},'201':{start:{line:625,column:0},end:{line:634,column:3}},'202':{start:{line:626,column:4},end:{line:633,column:7}},'203':{start:{line:627,column:23},end:{line:631,column:9}},'204':{start:{line:632,column:8},end:{line:632,column:27}},'205':{start:{line:636,column:0},end:{line:645,column:3}},'206':{start:{line:637,column:4},end:{line:644,column:7}},'207':{start:{line:638,column:23},end:{line:642,column:9}},'208':{start:{line:643,column:8},end:{line:643,column:27}},'209':{start:{line:648,column:8},end:{line:701,column:11}},'210':{start:{line:663,column:25},end:{line:663,column:27}},'211':{start:{line:664,column:30},end:{line:664,column:31}},'212':{start:{line:665,column:12},end:{line:677,column:15}},'213':{start:{line:666,column:16},end:{line:676,column:17}},'214':{start:{line:667,column:35},end:{line:667,column:37}},'215':{start:{line:668,column:38},end:{line:668,column:70}},'216':{start:{line:669,column:36},end:{line:669,column:66}},'217':{start:{line:670,column:20},end:{line:670,column:50}},'218':{start:{line:671,column:20},end:{line:671,column:62}},'219':{start:{line:672,column:20},end:{line:672,column:156}},'220':{start:{line:673,column:20},end:{line:673,column:144}},'221':{start:{line:674,column:20},end:{line:674,column:62}},'222':{start:{line:675,column:20},end:{line:675,column:42}},'223':{start:{line:678,column:12},end:{line:680,column:34}},'224':{start:{line:679,column:16},end:{line:680,column:34}},'225':{start:{line:680,column:20},end:{line:680,column:34}},'226':{start:{line:681,column:30},end:{line:681,column:63}},'227':{start:{line:681,column:54},end:{line:681,column:62}},'228':{start:{line:682,column:12},end:{line:685,column:15}},'229':{start:{line:683,column:16},end:{line:683,column:32}},'230':{start:{line:684,column:16},end:{line:684,column:29}},'231':{start:{line:687,column:23},end:{line:687,column:60}},'232':{start:{line:689,column:24},end:{line:689,column:52}},'233':{start:{line:690,column:33},end:{line:690,column:57}},'234':{start:{line:691,column:12},end:{line:698,column:13}},'235':{start:{line:692,column:30},end:{line:692,column:67}},'236':{start:{line:693,column:16},end:{line:693,column:68}},'237':{start:{line:694,column:16},end:{line:694,column:75}},'238':{start:{line:695,column:35},end:{line:695,column:58}},'239':{start:{line:696,column:33},end:{line:696,column:62}},'240':{start:{line:697,column:16},end:{line:697,column:92}},'241':{start:{line:699,column:12},end:{line:699,column:62}},'242':{start:{line:700,column:12},end:{line:700,column:74}},'243':{start:{line:704,column:0},end:{line:704,column:24}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:17,column:37},end:{line:17,column:38}},loc:{start:{line:17,column:57},end:{line:35,column:1}},line:17},'1':{name:'(anonymous_1)',decl:{start:{line:25,column:12},end:{line:25,column:13}},loc:{start:{line:25,column:28},end:{line:34,column:5}},line:25},'2':{name:'(anonymous_2)',decl:{start:{line:38,column:26},end:{line:38,column:27}},loc:{start:{line:38,column:46},end:{line:66,column:1}},line:38},'3':{name:'(anonymous_3)',decl:{start:{line:41,column:12},end:{line:41,column:13}},loc:{start:{line:41,column:24},end:{line:65,column:5}},line:41},'4':{name:'(anonymous_4)',decl:{start:{line:43,column:47},end:{line:43,column:48}},loc:{start:{line:43,column:65},end:{line:64,column:9}},line:43},'5':{name:'(anonymous_5)',decl:{start:{line:57,column:20},end:{line:57,column:21}},loc:{start:{line:57,column:32},end:{line:62,column:21}},line:57},'6':{name:'(anonymous_6)',decl:{start:{line:69,column:29},end:{line:69,column:30}},loc:{start:{line:69,column:49},end:{line:99,column:1}},line:69},'7':{name:'(anonymous_7)',decl:{start:{line:72,column:12},end:{line:72,column:13}},loc:{start:{line:72,column:24},end:{line:98,column:5}},line:72},'8':{name:'(anonymous_8)',decl:{start:{line:73,column:47},end:{line:73,column:48}},loc:{start:{line:73,column:65},end:{line:97,column:9}},line:73},'9':{name:'(anonymous_9)',decl:{start:{line:85,column:20},end:{line:85,column:21}},loc:{start:{line:85,column:32},end:{line:90,column:21}},line:85},'10':{name:'(anonymous_10)',decl:{start:{line:102,column:29},end:{line:102,column:30}},loc:{start:{line:102,column:49},end:{line:119,column:1}},line:102},'11':{name:'(anonymous_11)',decl:{start:{line:103,column:49},end:{line:103,column:50}},loc:{start:{line:103,column:65},end:{line:117,column:5}},line:103},'12':{name:'(anonymous_12)',decl:{start:{line:110,column:56},end:{line:110,column:57}},loc:{start:{line:110,column:68},end:{line:115,column:13}},line:110},'13':{name:'(anonymous_13)',decl:{start:{line:122,column:33},end:{line:122,column:34}},loc:{start:{line:122,column:53},end:{line:131,column:1}},line:122},'14':{name:'(anonymous_14)',decl:{start:{line:123,column:29},end:{line:123,column:30}},loc:{start:{line:123,column:44},end:{line:130,column:5}},line:123},'15':{name:'(anonymous_15)',decl:{start:{line:133,column:38},end:{line:133,column:39}},loc:{start:{line:133,column:58},end:{line:158,column:1}},line:133},'16':{name:'(anonymous_16)',decl:{start:{line:150,column:47},end:{line:150,column:48}},loc:{start:{line:150,column:74},end:{line:157,column:5}},line:150},'17':{name:'(anonymous_17)',decl:{start:{line:161,column:35},end:{line:161,column:36}},loc:{start:{line:161,column:55},end:{line:184,column:1}},line:161},'18':{name:'(anonymous_18)',decl:{start:{line:164,column:60},end:{line:164,column:61}},loc:{start:{line:164,column:78},end:{line:182,column:5}},line:164},'19':{name:'(anonymous_19)',decl:{start:{line:175,column:16},end:{line:175,column:17}},loc:{start:{line:175,column:28},end:{line:180,column:17}},line:175},'20':{name:'(anonymous_20)',decl:{start:{line:187,column:38},end:{line:187,column:39}},loc:{start:{line:187,column:58},end:{line:211,column:1}},line:187},'21':{name:'(anonymous_21)',decl:{start:{line:189,column:60},end:{line:189,column:61}},loc:{start:{line:189,column:78},end:{line:210,column:5}},line:189},'22':{name:'(anonymous_22)',decl:{start:{line:196,column:16},end:{line:196,column:17}},loc:{start:{line:196,column:28},end:{line:201,column:17}},line:196},'23':{name:'(anonymous_23)',decl:{start:{line:214,column:38},end:{line:214,column:39}},loc:{start:{line:214,column:58},end:{line:232,column:1}},line:214},'24':{name:'(anonymous_24)',decl:{start:{line:216,column:47},end:{line:216,column:48}},loc:{start:{line:216,column:63},end:{line:230,column:5}},line:216},'25':{name:'(anonymous_25)',decl:{start:{line:223,column:74},end:{line:223,column:75}},loc:{start:{line:223,column:86},end:{line:228,column:13}},line:223},'26':{name:'(anonymous_26)',decl:{start:{line:235,column:25},end:{line:235,column:26}},loc:{start:{line:235,column:45},end:{line:253,column:1}},line:235},'27':{name:'(anonymous_27)',decl:{start:{line:245,column:37},end:{line:245,column:38}},loc:{start:{line:245,column:54},end:{line:252,column:5}},line:245},'28':{name:'(anonymous_28)',decl:{start:{line:255,column:25},end:{line:255,column:26}},loc:{start:{line:255,column:45},end:{line:350,column:1}},line:255},'29':{name:'(anonymous_29)',decl:{start:{line:261,column:8},end:{line:261,column:9}},loc:{start:{line:261,column:26},end:{line:349,column:9}},line:261},'30':{name:'(anonymous_30)',decl:{start:{line:278,column:47},end:{line:278,column:48}},loc:{start:{line:278,column:65},end:{line:347,column:15}},line:278},'31':{name:'(anonymous_31)',decl:{start:{line:280,column:22},end:{line:280,column:23}},loc:{start:{line:280,column:41},end:{line:346,column:23}},line:280},'32':{name:'(anonymous_32)',decl:{start:{line:285,column:131},end:{line:285,column:132}},loc:{start:{line:285,column:154},end:{line:344,column:39}},line:285},'33':{name:'(anonymous_33)',decl:{start:{line:286,column:83},end:{line:286,column:84}},loc:{start:{line:286,column:93},end:{line:343,column:43}},line:286},'34':{name:'(anonymous_34)',decl:{start:{line:305,column:58},end:{line:305,column:59}},loc:{start:{line:305,column:78},end:{line:341,column:51}},line:305},'35':{name:'(anonymous_35)',decl:{start:{line:308,column:97},end:{line:308,column:98}},loc:{start:{line:308,column:110},end:{line:308,column:124}},line:308},'36':{name:'(anonymous_36)',decl:{start:{line:314,column:86},end:{line:314,column:87}},loc:{start:{line:314,column:94},end:{line:314,column:101}},line:314},'37':{name:'(anonymous_37)',decl:{start:{line:316,column:75},end:{line:316,column:76}},loc:{start:{line:316,column:90},end:{line:339,column:59}},line:316},'38':{name:'(anonymous_38)',decl:{start:{line:317,column:134},end:{line:317,column:135}},loc:{start:{line:317,column:154},end:{line:338,column:63}},line:317},'39':{name:'(anonymous_39)',decl:{start:{line:320,column:148},end:{line:320,column:149}},loc:{start:{line:320,column:154},end:{line:330,column:71}},line:320},'40':{name:'checkNotSuitableTime',decl:{start:{line:352,column:9},end:{line:352,column:29}},loc:{start:{line:352,column:35},end:{line:354,column:1}},line:352},'41':{name:'(anonymous_41)',decl:{start:{line:357,column:26},end:{line:357,column:27}},loc:{start:{line:357,column:46},end:{line:545,column:1}},line:357},'42':{name:'(anonymous_42)',decl:{start:{line:367,column:8},end:{line:367,column:9}},loc:{start:{line:367,column:26},end:{line:544,column:9}},line:367},'43':{name:'(anonymous_43)',decl:{start:{line:391,column:20},end:{line:391,column:21}},loc:{start:{line:391,column:38},end:{line:542,column:21}},line:391},'44':{name:'(anonymous_44)',decl:{start:{line:419,column:28},end:{line:419,column:29}},loc:{start:{line:419,column:40},end:{line:540,column:29}},line:419},'45':{name:'(anonymous_45)',decl:{start:{line:422,column:140},end:{line:422,column:141}},loc:{start:{line:422,column:163},end:{line:536,column:45}},line:422},'46':{name:'(anonymous_46)',decl:{start:{line:423,column:89},end:{line:423,column:90}},loc:{start:{line:423,column:99},end:{line:535,column:49}},line:423},'47':{name:'(anonymous_47)',decl:{start:{line:455,column:90},end:{line:455,column:91}},loc:{start:{line:455,column:106},end:{line:484,column:61}},line:455},'48':{name:'(anonymous_48)',decl:{start:{line:460,column:72},end:{line:460,column:73}},loc:{start:{line:460,column:97},end:{line:483,column:65}},line:460},'49':{name:'(anonymous_49)',decl:{start:{line:469,column:80},end:{line:469,column:81}},loc:{start:{line:469,column:86},end:{line:474,column:73}},line:469},'50':{name:'(anonymous_50)',decl:{start:{line:488,column:91},end:{line:488,column:92}},loc:{start:{line:488,column:107},end:{line:522,column:61}},line:488},'51':{name:'(anonymous_51)',decl:{start:{line:494,column:72},end:{line:494,column:73}},loc:{start:{line:494,column:97},end:{line:521,column:65}},line:494},'52':{name:'(anonymous_52)',decl:{start:{line:503,column:80},end:{line:503,column:81}},loc:{start:{line:503,column:86},end:{line:517,column:73}},line:503},'53':{name:'(anonymous_53)',decl:{start:{line:547,column:28},end:{line:547,column:29}},loc:{start:{line:547,column:48},end:{line:565,column:1}},line:547},'54':{name:'(anonymous_54)',decl:{start:{line:552,column:12},end:{line:552,column:13}},loc:{start:{line:552,column:24},end:{line:564,column:5}},line:552},'55':{name:'(anonymous_55)',decl:{start:{line:558,column:12},end:{line:558,column:13}},loc:{start:{line:558,column:24},end:{line:563,column:13}},line:558},'56':{name:'(anonymous_56)',decl:{start:{line:568,column:28},end:{line:568,column:29}},loc:{start:{line:568,column:48},end:{line:607,column:1}},line:568},'57':{name:'(anonymous_57)',decl:{start:{line:571,column:8},end:{line:571,column:9}},loc:{start:{line:571,column:14},end:{line:605,column:9}},line:571},'58':{name:'(anonymous_58)',decl:{start:{line:575,column:20},end:{line:575,column:21}},loc:{start:{line:575,column:46},end:{line:591,column:21}},line:575},'59':{name:'(anonymous_59)',decl:{start:{line:580,column:32},end:{line:580,column:33}},loc:{start:{line:580,column:38},end:{line:582,column:25}},line:580},'60':{name:'(anonymous_60)',decl:{start:{line:583,column:69},end:{line:583,column:70}},loc:{start:{line:583,column:81},end:{line:590,column:25}},line:583},'61':{name:'(anonymous_61)',decl:{start:{line:595,column:20},end:{line:595,column:21}},loc:{start:{line:595,column:46},end:{line:603,column:21}},line:595},'62':{name:'(anonymous_62)',decl:{start:{line:596,column:69},end:{line:596,column:70}},loc:{start:{line:596,column:81},end:{line:602,column:25}},line:596},'63':{name:'(anonymous_63)',decl:{start:{line:609,column:29},end:{line:609,column:30}},loc:{start:{line:609,column:49},end:{line:623,column:1}},line:609},'64':{name:'(anonymous_64)',decl:{start:{line:615,column:12},end:{line:615,column:13}},loc:{start:{line:615,column:31},end:{line:622,column:5}},line:615},'65':{name:'(anonymous_65)',decl:{start:{line:625,column:28},end:{line:625,column:29}},loc:{start:{line:625,column:48},end:{line:634,column:1}},line:625},'66':{name:'(anonymous_66)',decl:{start:{line:626,column:25},end:{line:626,column:26}},loc:{start:{line:626,column:33},end:{line:633,column:5}},line:626},'67':{name:'(anonymous_67)',decl:{start:{line:636,column:24},end:{line:636,column:25}},loc:{start:{line:636,column:44},end:{line:645,column:1}},line:636},'68':{name:'(anonymous_68)',decl:{start:{line:637,column:34},end:{line:637,column:35}},loc:{start:{line:637,column:42},end:{line:644,column:5}},line:637},'69':{name:'makeFileCalendar',decl:{start:{line:647,column:9},end:{line:647,column:25}},loc:{start:{line:647,column:28},end:{line:702,column:5}},line:647},'70':{name:'(anonymous_70)',decl:{start:{line:661,column:16},end:{line:661,column:17}},loc:{start:{line:661,column:38},end:{line:701,column:9}},line:661},'71':{name:'(anonymous_71)',decl:{start:{line:665,column:31},end:{line:665,column:32}},loc:{start:{line:665,column:41},end:{line:677,column:13}},line:665},'72':{name:'(anonymous_72)',decl:{start:{line:681,column:45},end:{line:681,column:46}},loc:{start:{line:681,column:54},end:{line:681,column:62}},line:681},'73':{name:'(anonymous_73)',decl:{start:{line:682,column:28},end:{line:682,column:29}},loc:{start:{line:682,column:39},end:{line:685,column:13}},line:682}},branchMap:{'0':{loc:{start:{line:10,column:0},end:{line:13,column:54}},type:'if',locations:[{start:{line:10,column:0},end:{line:13,column:54}},{start:{line:10,column:0},end:{line:13,column:54}}],line:10},'1':{loc:{start:{line:44,column:12},end:{line:63,column:13}},type:'if',locations:[{start:{line:44,column:12},end:{line:63,column:13}},{start:{line:44,column:12},end:{line:63,column:13}}],line:44},'2':{loc:{start:{line:74,column:12},end:{line:96,column:13}},type:'if',locations:[{start:{line:74,column:12},end:{line:96,column:13}},{start:{line:74,column:12},end:{line:96,column:13}}],line:74},'3':{loc:{start:{line:104,column:8},end:{line:116,column:9}},type:'if',locations:[{start:{line:104,column:8},end:{line:116,column:9}},{start:{line:104,column:8},end:{line:116,column:9}}],line:104},'4':{loc:{start:{line:165,column:8},end:{line:181,column:9}},type:'if',locations:[{start:{line:165,column:8},end:{line:181,column:9}},{start:{line:165,column:8},end:{line:181,column:9}}],line:165},'5':{loc:{start:{line:190,column:8},end:{line:209,column:9}},type:'if',locations:[{start:{line:190,column:8},end:{line:209,column:9}},{start:{line:190,column:8},end:{line:209,column:9}}],line:190},'6':{loc:{start:{line:217,column:8},end:{line:229,column:9}},type:'if',locations:[{start:{line:217,column:8},end:{line:229,column:9}},{start:{line:217,column:8},end:{line:229,column:9}}],line:217},'7':{loc:{start:{line:264,column:12},end:{line:348,column:11}},type:'if',locations:[{start:{line:264,column:12},end:{line:348,column:11}},{start:{line:264,column:12},end:{line:348,column:11}}],line:264},'8':{loc:{start:{line:270,column:19},end:{line:348,column:11}},type:'if',locations:[{start:{line:270,column:19},end:{line:348,column:11}},{start:{line:270,column:19},end:{line:348,column:11}}],line:270},'9':{loc:{start:{line:281,column:26},end:{line:345,column:27}},type:'if',locations:[{start:{line:281,column:26},end:{line:345,column:27}},{start:{line:281,column:26},end:{line:345,column:27}}],line:281},'10':{loc:{start:{line:287,column:46},end:{line:342,column:47}},type:'if',locations:[{start:{line:287,column:46},end:{line:342,column:47}},{start:{line:287,column:46},end:{line:342,column:47}}],line:287},'11':{loc:{start:{line:289,column:50},end:{line:295,column:51}},type:'if',locations:[{start:{line:289,column:50},end:{line:295,column:51}},{start:{line:289,column:50},end:{line:295,column:51}}],line:289},'12':{loc:{start:{line:291,column:57},end:{line:295,column:51}},type:'if',locations:[{start:{line:291,column:57},end:{line:295,column:51}},{start:{line:291,column:57},end:{line:295,column:51}}],line:291},'13':{loc:{start:{line:306,column:54},end:{line:340,column:55}},type:'if',locations:[{start:{line:306,column:54},end:{line:340,column:55}},{start:{line:306,column:54},end:{line:340,column:55}}],line:306},'14':{loc:{start:{line:310,column:58},end:{line:312,column:59}},type:'if',locations:[{start:{line:310,column:58},end:{line:312,column:59}},{start:{line:310,column:58},end:{line:312,column:59}}],line:310},'15':{loc:{start:{line:319,column:66},end:{line:337,column:67}},type:'if',locations:[{start:{line:319,column:66},end:{line:337,column:67}},{start:{line:319,column:66},end:{line:337,column:67}}],line:319},'16':{loc:{start:{line:368,column:12},end:{line:371,column:14}},type:'if',locations:[{start:{line:368,column:12},end:{line:371,column:14}},{start:{line:368,column:12},end:{line:371,column:14}}],line:368},'17':{loc:{start:{line:368,column:16},end:{line:369,column:41}},type:'binary-expr',locations:[{start:{line:368,column:16},end:{line:368,column:60}},{start:{line:369,column:16},end:{line:369,column:41}}],line:368},'18':{loc:{start:{line:373,column:12},end:{line:543,column:13}},type:'if',locations:[{start:{line:373,column:12},end:{line:543,column:13}},{start:{line:373,column:12},end:{line:543,column:13}}],line:373},'19':{loc:{start:{line:404,column:40},end:{line:404,column:87}},type:'cond-expr',locations:[{start:{line:404,column:58},end:{line:404,column:82}},{start:{line:404,column:85},end:{line:404,column:87}}],line:404},'20':{loc:{start:{line:420,column:32},end:{line:539,column:33}},type:'if',locations:[{start:{line:420,column:32},end:{line:539,column:33}},{start:{line:420,column:32},end:{line:539,column:33}}],line:420},'21':{loc:{start:{line:424,column:52},end:{line:534,column:53}},type:'if',locations:[{start:{line:424,column:52},end:{line:534,column:53}},{start:{line:424,column:52},end:{line:534,column:53}}],line:424},'22':{loc:{start:{line:446,column:80},end:{line:446,column:146}},type:'cond-expr',locations:[{start:{line:446,column:109},end:{line:446,column:142}},{start:{line:446,column:145},end:{line:446,column:146}}],line:446},'23':{loc:{start:{line:447,column:75},end:{line:447,column:131}},type:'cond-expr',locations:[{start:{line:447,column:99},end:{line:447,column:127}},{start:{line:447,column:130},end:{line:447,column:131}}],line:447},'24':{loc:{start:{line:453,column:56},end:{line:485,column:57}},type:'if',locations:[{start:{line:453,column:56},end:{line:485,column:57}},{start:{line:453,column:56},end:{line:485,column:57}}],line:453},'25':{loc:{start:{line:462,column:68},end:{line:482,column:69}},type:'if',locations:[{start:{line:462,column:68},end:{line:482,column:69}},{start:{line:462,column:68},end:{line:482,column:69}}],line:462},'26':{loc:{start:{line:486,column:56},end:{line:523,column:57}},type:'if',locations:[{start:{line:486,column:56},end:{line:523,column:57}},{start:{line:486,column:56},end:{line:523,column:57}}],line:486},'27':{loc:{start:{line:496,column:68},end:{line:520,column:69}},type:'if',locations:[{start:{line:496,column:68},end:{line:520,column:69}},{start:{line:496,column:68},end:{line:520,column:69}}],line:496},'28':{loc:{start:{line:512,column:89},end:{line:512,column:132}},type:'binary-expr',locations:[{start:{line:512,column:89},end:{line:512,column:104}},{start:{line:512,column:108},end:{line:512,column:132}}],line:512},'29':{loc:{start:{line:572,column:12},end:{line:604,column:13}},type:'if',locations:[{start:{line:572,column:12},end:{line:604,column:13}},{start:{line:572,column:12},end:{line:604,column:13}}],line:572},'30':{loc:{start:{line:666,column:16},end:{line:676,column:17}},type:'if',locations:[{start:{line:666,column:16},end:{line:676,column:17}},{start:{line:666,column:16},end:{line:676,column:17}}],line:666},'31':{loc:{start:{line:679,column:16},end:{line:680,column:34}},type:'if',locations:[{start:{line:679,column:16},end:{line:680,column:34}},{start:{line:679,column:16},end:{line:680,column:34}}],line:679},'32':{loc:{start:{line:679,column:20},end:{line:679,column:69}},type:'binary-expr',locations:[{start:{line:679,column:20},end:{line:679,column:39}},{start:{line:679,column:43},end:{line:679,column:69}}],line:679}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0,'75':0,'76':0,'77':0,'78':0,'79':0,'80':0,'81':0,'82':0,'83':0,'84':0,'85':0,'86':0,'87':0,'88':0,'89':0,'90':0,'91':0,'92':0,'93':0,'94':0,'95':0,'96':0,'97':0,'98':0,'99':0,'100':0,'101':0,'102':0,'103':0,'104':0,'105':0,'106':0,'107':0,'108':0,'109':0,'110':0,'111':0,'112':0,'113':0,'114':0,'115':0,'116':0,'117':0,'118':0,'119':0,'120':0,'121':0,'122':0,'123':0,'124':0,'125':0,'126':0,'127':0,'128':0,'129':0,'130':0,'131':0,'132':0,'133':0,'134':0,'135':0,'136':0,'137':0,'138':0,'139':0,'140':0,'141':0,'142':0,'143':0,'144':0,'145':0,'146':0,'147':0,'148':0,'149':0,'150':0,'151':0,'152':0,'153':0,'154':0,'155':0,'156':0,'157':0,'158':0,'159':0,'160':0,'161':0,'162':0,'163':0,'164':0,'165':0,'166':0,'167':0,'168':0,'169':0,'170':0,'171':0,'172':0,'173':0,'174':0,'175':0,'176':0,'177':0,'178':0,'179':0,'180':0,'181':0,'182':0,'183':0,'184':0,'185':0,'186':0,'187':0,'188':0,'189':0,'190':0,'191':0,'192':0,'193':0,'194':0,'195':0,'196':0,'197':0,'198':0,'199':0,'200':0,'201':0,'202':0,'203':0,'204':0,'205':0,'206':0,'207':0,'208':0,'209':0,'210':0,'211':0,'212':0,'213':0,'214':0,'215':0,'216':0,'217':0,'218':0,'219':0,'220':0,'221':0,'222':0,'223':0,'224':0,'225':0,'226':0,'227':0,'228':0,'229':0,'230':0,'231':0,'232':0,'233':0,'234':0,'235':0,'236':0,'237':0,'238':0,'239':0,'240':0,'241':0,'242':0,'243':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0],'12':[0,0],'13':[0,0],'14':[0,0],'15':[0,0],'16':[0,0],'17':[0,0],'18':[0,0],'19':[0,0],'20':[0,0],'21':[0,0],'22':[0,0],'23':[0,0],'24':[0,0],'25':[0,0],'26':[0,0],'27':[0,0],'28':[0,0],'29':[0,0],'30':[0,0],'31':[0,0],'32':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var router=(cov_lhgb54mom.s[0]++,require('express').Router());var models=(cov_lhgb54mom.s[1]++,require('../../models'));var log=(cov_lhgb54mom.s[2]++,require('../../config/config')["log"]);var notification=(cov_lhgb54mom.s[3]++,require('../../notification'));var Job=(cov_lhgb54mom.s[4]++,require('../../automatic'));var _=(cov_lhgb54mom.s[5]++,require('underscore'));var ics=(cov_lhgb54mom.s[6]++,require('ics'));var fs=(cov_lhgb54mom.s[7]++,require('fs'));var settings;cov_lhgb54mom.s[8]++;if(fs.existsSync('settings.js')==true){cov_lhgb54mom.b[0][0]++;cov_lhgb54mom.s[9]++;settings=require('../../../settings.js');}else{cov_lhgb54mom.b[0][1]++;cov_lhgb54mom.s[10]++;settings=require('../../../settingsDefault.js');}var uuid=(cov_lhgb54mom.s[11]++,require('uuid/v1'));// get all class and trainer
//  return class Array with trainer name and class nam
cov_lhgb54mom.s[12]++;router.get('/getAllClassFullDetail',function(req,res){cov_lhgb54mom.f[0]++;cov_lhgb54mom.s[13]++;models.User.findAll({include:[{model:models.Class,include:[models.Course]}]}).then(function(data){cov_lhgb54mom.f[1]++;var classList=(cov_lhgb54mom.s[14]++,[]);cov_lhgb54mom.s[15]++;for(let i=0;i<data.length;i++){cov_lhgb54mom.s[16]++;classList.push(data[i].dataValues);}cov_lhgb54mom.s[17]++;res.send({success:true,data:classList});});});// add course to database
cov_lhgb54mom.s[18]++;router.post('/addCourse',function(req,res){cov_lhgb54mom.f[2]++;cov_lhgb54mom.s[19]++;models.Course.sync({force:false}).then(function(){cov_lhgb54mom.f[3]++;cov_lhgb54mom.s[20]++;// this function check if the courseName is already existed
models.Course.getByName(req.body.name,function(result){cov_lhgb54mom.f[4]++;cov_lhgb54mom.s[21]++;if(result){cov_lhgb54mom.b[1][0]++;cov_lhgb54mom.s[22]++;res.send({success:false,msg:'Name already existed. Add fail!'});}else{cov_lhgb54mom.b[1][1]++;cov_lhgb54mom.s[23]++;models.Course.add(req.body.name,req.body.description,req.body.duration,req.body.test,req.body.documents,req.body.trainingProgramId,function(){cov_lhgb54mom.f[5]++;cov_lhgb54mom.s[24]++;res.send({success:true,msg:"Add Course Success"});});}});});});// update course in database
cov_lhgb54mom.s[25]++;router.post('/updateCourse',function(req,res){cov_lhgb54mom.f[6]++;cov_lhgb54mom.s[26]++;models.Course.sync({force:false}).then(function(){cov_lhgb54mom.f[7]++;cov_lhgb54mom.s[27]++;models.Course.getByName(req.body.name,function(result){cov_lhgb54mom.f[8]++;cov_lhgb54mom.s[28]++;if(result){cov_lhgb54mom.b[2][0]++;var courseDetail=(cov_lhgb54mom.s[29]++,{id:req.body.id,name:req.body.name,description:req.body.description,duration:req.body.duration,test:req.body.test,documents:req.body.documents});cov_lhgb54mom.s[30]++;models.Course.edit(courseDetail,function(){cov_lhgb54mom.f[9]++;cov_lhgb54mom.s[31]++;res.send({success:true,msg:'Edit course success!'});});}else{cov_lhgb54mom.b[2][1]++;cov_lhgb54mom.s[32]++;res.send({success:false,msg:'Name not existed. Update failed!'});}});});});// destroy Course
cov_lhgb54mom.s[33]++;router.post('/deleteCourse',function(req,res){cov_lhgb54mom.f[10]++;cov_lhgb54mom.s[34]++;models.Class.getClassByCourseID(req.body.id,function(data){cov_lhgb54mom.f[11]++;cov_lhgb54mom.s[35]++;if(data.length>0){cov_lhgb54mom.b[3][0]++;cov_lhgb54mom.s[36]++;res.send({success:false,msg:'Delete Course failed'});}else{cov_lhgb54mom.b[3][1]++;cov_lhgb54mom.s[37]++;models.Course.deleteCourseByID(req.body.id,function(){cov_lhgb54mom.f[12]++;cov_lhgb54mom.s[38]++;res.send({success:true,msg:'Delete Course success'});});}});});//getCourseTypeList
cov_lhgb54mom.s[39]++;router.get('/getCourseTypeList',function(req,res){cov_lhgb54mom.f[13]++;cov_lhgb54mom.s[40]++;models.CourseType.getAll(courseTypes=>{cov_lhgb54mom.f[14]++;var datasend=(cov_lhgb54mom.s[41]++,{success:true,msg:'send list success',courseType:courseTypes});cov_lhgb54mom.s[42]++;res.send(datasend);});});cov_lhgb54mom.s[43]++;router.get('/getTrainingProgramList',function(req,res){cov_lhgb54mom.f[15]++;var query=(cov_lhgb54mom.s[44]++,{include:[{model:models.CourseType},{model:models.Course,include:[{model:models.Class,include:[{model:models.ClassRecord}]}]}]});cov_lhgb54mom.s[45]++;models.TrainingProgram.findAll(query).then(function(trainingProgram){cov_lhgb54mom.f[16]++;var datasend=(cov_lhgb54mom.s[46]++,{success:true,msg:'send list success',trainingProgram:trainingProgram});cov_lhgb54mom.s[47]++;res.send(datasend);});});//Add Training programs
cov_lhgb54mom.s[48]++;router.post('/addTrainingProgram',function(req,res){cov_lhgb54mom.f[17]++;cov_lhgb54mom.s[49]++;log.info('/admin/courses/addTrainingProgram: Add Training Program :'+req.body.name);// this function check if the courseName is already existed
cov_lhgb54mom.s[50]++;models.TrainingProgram.getTrainingByName(req.body.name,function(result){cov_lhgb54mom.f[18]++;cov_lhgb54mom.s[51]++;if(result){cov_lhgb54mom.b[4][0]++;cov_lhgb54mom.s[52]++;res.send({success:false,msg:'Name already existed. Add fail!'});}else{cov_lhgb54mom.b[4][1]++;cov_lhgb54mom.s[53]++;models.TrainingProgram.add(req.body.name,req.body.description,req.body.courseTypeId.id,function(){cov_lhgb54mom.f[19]++;cov_lhgb54mom.s[54]++;res.send({success:true,msg:"Add Training Program Success"});});}});});//Updtae Training Program
cov_lhgb54mom.s[55]++;router.post('/updateTrainingProgram',function(req,res){cov_lhgb54mom.f[20]++;cov_lhgb54mom.s[56]++;log.info('/admin/updateTrainingProgram: Update Training Program :'+req.body.Name);cov_lhgb54mom.s[57]++;models.TrainingProgram.getTrainingByName(req.body.name,function(result){cov_lhgb54mom.f[21]++;cov_lhgb54mom.s[58]++;if(result){cov_lhgb54mom.b[5][0]++;cov_lhgb54mom.s[59]++;models.TrainingProgram.edit(req.body.id,req.body.name,req.body.description,req.body.courseTypeId.id,function(){cov_lhgb54mom.f[22]++;cov_lhgb54mom.s[60]++;res.send({success:true,msg:"Updating Training Program Successes"});});}else{cov_lhgb54mom.b[5][1]++;cov_lhgb54mom.s[61]++;res.send({success:false,msg:'Name not existed. Updating Training Program Failed!',msg0:req.body.id});}});});//delete Training Program
cov_lhgb54mom.s[62]++;router.post('/deleteTrainingProgram',function(req,res){cov_lhgb54mom.f[23]++;cov_lhgb54mom.s[63]++;log.info('Get Delete Command');cov_lhgb54mom.s[64]++;models.Course.getCourseByTPID(req.body.id,function(data){cov_lhgb54mom.f[24]++;cov_lhgb54mom.s[65]++;if(data.length>0){cov_lhgb54mom.b[6][0]++;cov_lhgb54mom.s[66]++;res.send({success:false,msg:'Delete Training Program failed'});}else{cov_lhgb54mom.b[6][1]++;cov_lhgb54mom.s[67]++;models.TrainingProgram.deleteTrainingProgramByID(req.body.id,function(){cov_lhgb54mom.f[25]++;cov_lhgb54mom.s[68]++;res.send({success:true,msg:'Delete Training Program success'});});}});});//Get Class
cov_lhgb54mom.s[69]++;router.post('/getClass',function(req,res){cov_lhgb54mom.f[26]++;var query=(cov_lhgb54mom.s[70]++,{include:[{model:models.Course}],where:{courseId:req.body.courseId}});cov_lhgb54mom.s[71]++;models.Class.findAll(query).then(function(Class){cov_lhgb54mom.f[27]++;var datasend=(cov_lhgb54mom.s[72]++,{success:true,msg:'send list success',Class:Class});cov_lhgb54mom.s[73]++;res.send(datasend);});});//add class
cov_lhgb54mom.s[74]++;router.post('/addClass',function(req,res){cov_lhgb54mom.f[28]++;var dataSend=(cov_lhgb54mom.s[75]++,{});var flgCheck=(cov_lhgb54mom.s[76]++,0);var classID=(cov_lhgb54mom.s[77]++,0);cov_lhgb54mom.s[78]++;models.Class.getAllOpenandIncomClass(function(result){cov_lhgb54mom.f[29]++;cov_lhgb54mom.s[79]++;flgCheck=models.ClassRecord.checkAvailableAddClass(result,req);// cancel add class
cov_lhgb54mom.s[80]++;if(flgCheck===-1){cov_lhgb54mom.b[7][0]++;cov_lhgb54mom.s[81]++;dataSend={success:false,msg:"Your class can't be added because of having a class in time frame at one location."};cov_lhgb54mom.s[82]++;return res.send(dataSend);}else{cov_lhgb54mom.b[7][1]++;cov_lhgb54mom.s[83]++;if(req.body.courseId==null){cov_lhgb54mom.b[8][0]++;cov_lhgb54mom.s[84]++;dataSend={success:false,msg:"not found courseId"};cov_lhgb54mom.s[85]++;return res.send(dataSend);}else{cov_lhgb54mom.b[8][1]++;// add class
let courseName;cov_lhgb54mom.s[86]++;req.body.arrayClassTime.forEach(arrayClassTime=>{cov_lhgb54mom.f[30]++;cov_lhgb54mom.s[87]++;models.Class.add(req,arrayClassTime.starttime,arrayClassTime.endtime,function(newClass){cov_lhgb54mom.f[31]++;cov_lhgb54mom.s[88]++;if(newClass){cov_lhgb54mom.b[9][0]++;cov_lhgb54mom.s[89]++;classID=newClass.dataValues.id;// neu ma goi thi chac goi cho nay  arrayClassTime
// ta can them cai goi la ClassID tai thoi diem do
cov_lhgb54mom.s[90]++;models.sessionClassTime.addSessionClassTime(newClass.dataValues.id,req.body.arrayClassTime,newSessionClassTime=>{cov_lhgb54mom.f[32]++;cov_lhgb54mom.s[91]++;models.Course.getByID(req.body.courseId,course=>{cov_lhgb54mom.f[33]++;cov_lhgb54mom.s[92]++;if(course){cov_lhgb54mom.b[10][0]++;var date=(cov_lhgb54mom.s[93]++,new Date(arrayClassTime.starttime));cov_lhgb54mom.s[94]++;if(date.getDay()==1){cov_lhgb54mom.b[11][0]++;cov_lhgb54mom.s[95]++;date.setDate(date.getDate()-3);}else{cov_lhgb54mom.b[11][1]++;cov_lhgb54mom.s[96]++;if(date.getDay()==0){cov_lhgb54mom.b[12][0]++;cov_lhgb54mom.s[97]++;date.setDate(date.getDate()-2);}else{cov_lhgb54mom.b[12][1]++;cov_lhgb54mom.s[98]++;date.setDate(date.getDate()-1);}}cov_lhgb54mom.s[99]++;courseName=course.name;// set content of email to send
var contentEmail=(cov_lhgb54mom.s[100]++,models.Notifications.setContentEmail(course,req,settings,classID));//auto add all requeter to class and noti to them that they have been added to class
cov_lhgb54mom.s[101]++;models.RequestOpening.findAll({// find all requester
include:models.User,where:{courseId:req.body.courseId}}).then(requesterResults=>{cov_lhgb54mom.f[34]++;cov_lhgb54mom.s[102]++;if(requesterResults){cov_lhgb54mom.b[13][0]++;// get requester and members have been invited
const Requester=(cov_lhgb54mom.s[103]++,requesterResults.map(requester=>{cov_lhgb54mom.f[35]++;cov_lhgb54mom.s[104]++;return requester.User;}));let bothUser=(cov_lhgb54mom.s[105]++,Requester);cov_lhgb54mom.s[106]++;if(req.body.specificAttendant){cov_lhgb54mom.b[14][0]++;cov_lhgb54mom.s[107]++;bothUser=Requester.concat(req.body.specificAttendant);}else{cov_lhgb54mom.b[14][1]++;}// filter to get unique member
cov_lhgb54mom.s[108]++;bothUser=_.uniq(bothUser,user=>{cov_lhgb54mom.f[36]++;cov_lhgb54mom.s[109]++;return user.id;});// add them to class
cov_lhgb54mom.s[110]++;bothUser.forEach(userRequest=>{cov_lhgb54mom.f[37]++;cov_lhgb54mom.s[111]++;models.ClassRecord.enrollCourse(userRequest.id,newClass.dataValues.id,newClassRecord=>{cov_lhgb54mom.f[38]++;cov_lhgb54mom.s[112]++;// delete request of him/her if has.
if(newClassRecord){cov_lhgb54mom.b[15][0]++;cov_lhgb54mom.s[113]++;models.RequestOpening.deleteRequestOpening(userRequest.id,req.body.courseId,()=>{cov_lhgb54mom.f[39]++;const contentNoti=(cov_lhgb54mom.s[114]++,"You have been added to class "+courseName+". Please check your calendar and course detail to get more information.");const refer=(cov_lhgb54mom.s[115]++,'detail_notification/'+newClass.dataValues.id);// noti to traine and send mail if has
cov_lhgb54mom.s[116]++;makeFileCalendar();cov_lhgb54mom.s[117]++;notification([userRequest.email],[userRequest.id],courseName,contentNoti,contentEmail,refer,1,1);const contentSessionNoti=(cov_lhgb54mom.s[118]++,"Your "+req.body.courseId+" class has been openned and scheduled to start tomorrow at location: "+req.body.location+". Please be on time, thank you.");// noti before class open
cov_lhgb54mom.s[119]++;Job.job_sendnoti_ClassStart(date,newSessionClassTime.id,course.name,contentSessionNoti,refer);});cov_lhgb54mom.s[120]++;dataSend={success:true,msg:"Add class successfully",idClass:classID};cov_lhgb54mom.s[121]++;res.send(dataSend);}else{cov_lhgb54mom.b[15][1]++;}});});}else{cov_lhgb54mom.b[13][1]++;}});}else{cov_lhgb54mom.b[10][1]++;}});});}else{cov_lhgb54mom.b[9][1]++;}});});}}});});function checkNotSuitableTime(req){cov_lhgb54mom.f[40]++;cov_lhgb54mom.s[122]++;return Date.parse(req.body.startTime)>=Date.parse(req.body.endTime);}//Edit Class
cov_lhgb54mom.s[123]++;router.post('/editClass',function(req,res){cov_lhgb54mom.f[41]++;var dataSend=(cov_lhgb54mom.s[124]++,{});var flgCheck=(cov_lhgb54mom.s[125]++,0);var classModify=(cov_lhgb54mom.s[126]++,{});const dataSend0=(cov_lhgb54mom.s[127]++,{success:false,msg:"Add class failed"// get all class opening and incoming to check with new class
});cov_lhgb54mom.s[128]++;models.Class.getAllOpenandIncomClass(function(result){cov_lhgb54mom.f[42]++;cov_lhgb54mom.s[129]++;if((cov_lhgb54mom.b[17][0]++,Date.now()>=Date.parse(req.body.startTime))||(cov_lhgb54mom.b[17][1]++,checkNotSuitableTime(req))){cov_lhgb54mom.b[16][0]++;cov_lhgb54mom.s[130]++;flgCheck=-1;}else{cov_lhgb54mom.b[16][1]++;}// cancel edit class
cov_lhgb54mom.s[131]++;if(flgCheck===-1){cov_lhgb54mom.b[18][0]++;cov_lhgb54mom.s[132]++;dataSend={success:false,msg:"Your class can't be edited."};cov_lhgb54mom.s[133]++;res.send(dataSend);}else{cov_lhgb54mom.b[18][1]++;// edit class
//get old data
var backupData;var query=(cov_lhgb54mom.s[134]++,{include:[{model:models.User}],where:{id:req.body.classid}});cov_lhgb54mom.s[135]++;models.Class.findOne(query).then(function(result){cov_lhgb54mom.f[43]++;cov_lhgb54mom.s[136]++;classModify=result;cov_lhgb54mom.s[137]++;backupData=result;var contentEditClass=(cov_lhgb54mom.s[138]++,{courseName:"",description:"",host:"",courseID:0,ClassId:req.body.classid,oldLocation:backupData.location,oldStartTime:backupData.startTime,oldEndTime:backupData.endTime,oldTrainer:backupData.User?(cov_lhgb54mom.b[19][0]++,backupData.User.username):(cov_lhgb54mom.b[19][1]++,''),newLocation:req.body.location,newStartTime:req.body.startTime,newEndTime:req.body.endTime//ewTrainer: req.body.trainer.username
});var courseName;cov_lhgb54mom.s[139]++;models.Class.edit(req.body.classid,req.body.location,req.body.startTime,req.body.endTime,// req.body.trainer.id,
newClass=>{cov_lhgb54mom.f[44]++;cov_lhgb54mom.s[140]++;if(newClass){cov_lhgb54mom.b[20][0]++;var classID=(cov_lhgb54mom.s[141]++,req.body.classid);cov_lhgb54mom.s[142]++;models.sessionClassTime.editSessionTime(req.body.classid,req.body.startTime,req.body.endTime,newSessionClassTime=>{cov_lhgb54mom.f[45]++;cov_lhgb54mom.s[143]++;models.Course.getByID(req.body.courseId,course=>{cov_lhgb54mom.f[46]++;cov_lhgb54mom.s[144]++;if(course){cov_lhgb54mom.b[21][0]++;var date=(cov_lhgb54mom.s[145]++,new Date(req.body.startTime));cov_lhgb54mom.s[146]++;date.setDate(date.getDate()-1);cov_lhgb54mom.s[147]++;courseName=course.name;var contentEmail=(cov_lhgb54mom.s[148]++,{courseName:courseName,description:course.description,startTime:req.body.startTime,endTime:req.body.endTime,location:req.body.location,host:settings.host,//trainer: req.body.trainer.username,
courseID:course.id,classID:classID});//equal some parameters for contentEditClass
cov_lhgb54mom.s[149]++;contentEditClass.courseName=courseName;cov_lhgb54mom.s[150]++;contentEditClass.description=course.description;cov_lhgb54mom.s[151]++;contentEditClass.host=settings.host;cov_lhgb54mom.s[152]++;contentEditClass.courseID=course.id;//noti to all old member after edit class success
let specificAttendant=(cov_lhgb54mom.s[153]++,req.body.specificAttendant?(cov_lhgb54mom.b[22][0]++,req.body.specificAttendant.length):(cov_lhgb54mom.b[22][1]++,0));let newAttendant=(cov_lhgb54mom.s[154]++,req.body.newAttendant?(cov_lhgb54mom.b[23][0]++,req.body.newAttendant.length):(cov_lhgb54mom.b[23][1]++,0));var totalOldTrainee=(cov_lhgb54mom.s[155]++,specificAttendant-newAttendant);cov_lhgb54mom.s[156]++;for(let index=0;index<totalOldTrainee;index++){cov_lhgb54mom.s[157]++;notification([req.body.specificAttendant[index].email],[req.body.specificAttendant[index].id],courseName,"Class "+courseName+" have been edited. Please check your calendar and course detail to get more information.",contentEmail,'detail_notification/'+classID,1);}//auto add new attendees to class and noti to them that they have been added to class
cov_lhgb54mom.s[158]++;if(req.body.newAttendant){cov_lhgb54mom.b[24][0]++;cov_lhgb54mom.s[159]++;//for (let i = 0; i < req.body.newAttendant.length; i++) {
req.body.newAttendant.forEach(newAttendant=>{cov_lhgb54mom.f[47]++;cov_lhgb54mom.s[160]++;models.ClassRecord.create({status:"Enrolled",classId:classID,traineeId:newAttendant.id}).then(function(newClassRecord){cov_lhgb54mom.f[48]++;cov_lhgb54mom.s[161]++;// delete request of him/her to this class if add to class success.
if(newClassRecord){cov_lhgb54mom.b[25][0]++;cov_lhgb54mom.s[162]++;// delete request opening
models.RequestOpening.destroy({where:{courseId:req.body.courseId,userId:newAttendant.id}}).then(()=>{cov_lhgb54mom.f[49]++;cov_lhgb54mom.s[163]++;// noti to all new member after add them to class
notification([newAttendant.email],[newAttendant.id],courseName,"You have been added to class "+courseName+". Please check your calendar and course detail to get more information.",contentEmail,'detail_notification/'+classID,1);});}else{cov_lhgb54mom.b[25][1]++;cov_lhgb54mom.s[164]++;dataSend={success:false,msg:"Edit class failed"};cov_lhgb54mom.s[165]++;return res.send(dataSend);}});});// ket thuc forEach
}else{cov_lhgb54mom.b[24][1]++;}cov_lhgb54mom.s[166]++;if(req.body.delAttendant){cov_lhgb54mom.b[26][0]++;cov_lhgb54mom.s[167]++;//for (let i = 0; i < req.body.delAttendant.length; i++) {
req.body.delAttendant.forEach(delAttendant=>{cov_lhgb54mom.f[50]++;cov_lhgb54mom.s[168]++;models.ClassRecord.destroy({where:{classId:classID,traineeId:delAttendant.id}}).then(function(newClassRecord){cov_lhgb54mom.f[51]++;cov_lhgb54mom.s[169]++;// delete request of him/her to this class if remove from class success.
if(newClassRecord){cov_lhgb54mom.b[27][0]++;cov_lhgb54mom.s[170]++;// delete request opening
models.RequestOpening.destroy({where:{courseId:req.body.courseId,userId:delAttendant.id}}).then(()=>{cov_lhgb54mom.f[52]++;cov_lhgb54mom.s[171]++;// noti to all member after remove them from class
contentEmail={courseName:courseName,description:course.description,startTime:backupData.startTime,endTime:backupData.endTime,location:backupData.location,host:settings.host,trainer:(cov_lhgb54mom.b[28][0]++,backupData.User)||(cov_lhgb54mom.b[28][1]++,backupData.User.username),courseID:course.id,classID:classID};cov_lhgb54mom.s[172]++;notification([delAttendant.email],[delAttendant.id],courseName,`You have been removed from class ${courseName}. Please contact your admin to get more information.`,contentEmail,'courseDetail/'+course.name,5);});}else{cov_lhgb54mom.b[27][1]++;cov_lhgb54mom.s[173]++;res.send(dataSend0);}});});// ket thuc forEach
}else{cov_lhgb54mom.b[26][1]++;}cov_lhgb54mom.s[174]++;dataSend={data:classModify,success:true,msg:"Edit class successfully"};cov_lhgb54mom.s[175]++;res.send(dataSend);cov_lhgb54mom.s[176]++;makeFileCalendar();cov_lhgb54mom.s[177]++;Job.job_sendnoti_ClassStart(date,newSessionClassTime.id,course.name,"Your "+req.body.courseId+" class has been open and scheduled to start tomorrow at location: "+req.body.location+". Please be on time, thank you.",'detail_notification/'+classID);}else{cov_lhgb54mom.b[21][1]++;cov_lhgb54mom.s[178]++;res.send(dataSend0);}});});}else{cov_lhgb54mom.b[20][1]++;cov_lhgb54mom.s[179]++;res.send(dataSend0);}});// edit success
});}});});//Update Class
cov_lhgb54mom.s[180]++;router.post('/updateClass',function(req,res){cov_lhgb54mom.f[53]++;cov_lhgb54mom.s[181]++;log.info('/admin/updateClass: update Class :'+req.body.id);//  need add trainee to class record
cov_lhgb54mom.s[182]++;models.Class.sync({force:false}).then(function(){cov_lhgb54mom.f[54]++;cov_lhgb54mom.s[183]++;models.Class.edit(req.body.courseId,req.body.location,req.body.startTime,req.body.endTime,function(){cov_lhgb54mom.f[55]++;cov_lhgb54mom.s[184]++;res.send({success:true,msg:'Edit Class Info success!'});});});});// Delete Class
cov_lhgb54mom.s[185]++;router.post('/deleteClass',function(req,res){cov_lhgb54mom.f[56]++;cov_lhgb54mom.s[186]++;models.Class.getOpeningClassByID(req.body.id,cb=>{cov_lhgb54mom.f[57]++;cov_lhgb54mom.s[187]++;if(cb){cov_lhgb54mom.b[29][0]++;cov_lhgb54mom.s[188]++;models.sessionClassTime.deleteSessionTime(req.body.id,function(idSessionClass){cov_lhgb54mom.f[58]++;cov_lhgb54mom.s[189]++;models.ClassRecord.destroy({where:{classId:idSessionClass}}).then(()=>{cov_lhgb54mom.f[59]++;cov_lhgb54mom.s[190]++;makeFileCalendar();});cov_lhgb54mom.s[191]++;models.Class.deleteClassByID(idSessionClass,function(){cov_lhgb54mom.f[60]++;cov_lhgb54mom.s[192]++;// warning it not delete row, just change classId to null
// and i dont know why ~~
res.send({success:true,msg:'Delete Class success'});});});}else{cov_lhgb54mom.b[29][1]++;cov_lhgb54mom.s[193]++;models.sessionClassTime.deleteSessionTime(req.body.id,function(idSessionClass){cov_lhgb54mom.f[61]++;cov_lhgb54mom.s[194]++;models.Class.deleteClassByID(idSessionClass,function(){cov_lhgb54mom.f[62]++;cov_lhgb54mom.s[195]++;makeFileCalendar();cov_lhgb54mom.s[196]++;res.send({success:true,msg:'Delete Class success'});});});}});});cov_lhgb54mom.s[197]++;router.get('/getAllTrainer',function(req,res){cov_lhgb54mom.f[63]++;cov_lhgb54mom.s[198]++;models.User.findAll({where:{isTrainer:true,status:'activated'}}).then(function(trainer){cov_lhgb54mom.f[64]++;var datasend=(cov_lhgb54mom.s[199]++,{success:true,msg:'send list success',trainer:trainer});cov_lhgb54mom.s[200]++;res.send(datasend);});});cov_lhgb54mom.s[201]++;router.get('/getAllCourse',function(req,res){cov_lhgb54mom.f[65]++;cov_lhgb54mom.s[202]++;models.Course.getAll(data=>{cov_lhgb54mom.f[66]++;var datasend=(cov_lhgb54mom.s[203]++,{success:true,msg:"get all courses done",data:data});cov_lhgb54mom.s[204]++;res.send(datasend);});});cov_lhgb54mom.s[205]++;router.get('/getAllTP',function(req,res){cov_lhgb54mom.f[67]++;cov_lhgb54mom.s[206]++;models.TrainingProgram.getAll(data=>{cov_lhgb54mom.f[68]++;var datasend=(cov_lhgb54mom.s[207]++,{success:true,msg:"get all training programs done",data:data});cov_lhgb54mom.s[208]++;res.send(datasend);});});function makeFileCalendar(){cov_lhgb54mom.f[69]++;cov_lhgb54mom.s[209]++;models.ClassRecord.findAll({include:[{model:models.Class,include:[{model:models.Course}]}],where:{classId:{$ne:null},status:'Enrolled'}}).then(function(courseList){cov_lhgb54mom.f[70]++;// day chinh la noi ma chung ta can xu ly
var events=(cov_lhgb54mom.s[210]++,[]);var countEvents=(cov_lhgb54mom.s[211]++,0);cov_lhgb54mom.s[212]++;courseList.forEach(course=>{cov_lhgb54mom.f[71]++;cov_lhgb54mom.s[213]++;if(course.Class){cov_lhgb54mom.b[30][0]++;let subEvent=(cov_lhgb54mom.s[214]++,{});const starttime=(cov_lhgb54mom.s[215]++,new Date(course.Class.startTime));const endtime=(cov_lhgb54mom.s[216]++,new Date(course.Class.endTime));cov_lhgb54mom.s[217]++;subEvent.id=course.Class.id;cov_lhgb54mom.s[218]++;subEvent.title=course.Class.Course.name;cov_lhgb54mom.s[219]++;subEvent.start=[starttime.getFullYear(),starttime.getMonth()+1,starttime.getDate(),starttime.getHours(),starttime.getMinutes()];cov_lhgb54mom.s[220]++;subEvent.end=[endtime.getFullYear(),endtime.getMonth()+1,endtime.getDate(),endtime.getHours(),endtime.getMinutes()];cov_lhgb54mom.s[221]++;subEvent.location=course.Class.location;cov_lhgb54mom.s[222]++;events.push(subEvent);}else{cov_lhgb54mom.b[30][1]++;}});cov_lhgb54mom.s[223]++;for(let i=0;i<courseList.length;i++){cov_lhgb54mom.s[224]++;if((cov_lhgb54mom.b[32][0]++,courseList[i].Class)&&(cov_lhgb54mom.b[32][1]++,courseList[i].Class.Course)){cov_lhgb54mom.b[31][0]++;cov_lhgb54mom.s[225]++;countEvents++;}else{cov_lhgb54mom.b[31][1]++;}}var eventFilter=(cov_lhgb54mom.s[226]++,_.uniq(events,event=>{cov_lhgb54mom.f[72]++;cov_lhgb54mom.s[227]++;return event.id;}));cov_lhgb54mom.s[228]++;eventFilter.map(value=>{cov_lhgb54mom.f[73]++;cov_lhgb54mom.s[229]++;delete value.id;cov_lhgb54mom.s[230]++;return value;});//make ics file
var temp=(cov_lhgb54mom.s[231]++,ics.createEvent(eventFilter[0]).value);var index=(cov_lhgb54mom.s[232]++,temp.search("END:VCALENDAR"));var contentICSfile=(cov_lhgb54mom.s[233]++,temp.substring(0,index));cov_lhgb54mom.s[234]++;for(let i=1;i<eventFilter.length;i++){const value=(cov_lhgb54mom.s[235]++,ics.createEvent(eventFilter[i]).value);cov_lhgb54mom.s[236]++;contentICSfile=contentICSfile+"BEGIN:VEVENT\r\n";cov_lhgb54mom.s[237]++;contentICSfile=contentICSfile+"UID:"+uuid()+"\r\n";let indexOfstart=(cov_lhgb54mom.s[238]++,value.search("SUMMARY"));let indexOfend=(cov_lhgb54mom.s[239]++,value.search("END:VCALENDAR"));cov_lhgb54mom.s[240]++;contentICSfile=contentICSfile+value.substring(indexOfstart,indexOfend);}cov_lhgb54mom.s[241]++;contentICSfile=contentICSfile+"END:VCALENDAR";cov_lhgb54mom.s[242]++;fs.writeFileSync(`client/calendar/event.ics`,contentICSfile);});}cov_lhgb54mom.s[243]++;module.exports=router;