var cov_1r94utadfy=function(){var path='D:\\DCC\\DCC\\server\\routes\\user\\userProfile.js',hash='aee2003490b726bd5bce91193ea258a1916dffd7',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'D:\\DCC\\DCC\\server\\routes\\user\\userProfile.js',statementMap:{'0':{start:{line:1,column:13},end:{line:1,column:40}},'1':{start:{line:2,column:13},end:{line:2,column:36}},'2':{start:{line:3,column:10},end:{line:3,column:47}},'3':{start:{line:4,column:10},end:{line:4,column:24}},'4':{start:{line:5,column:11},end:{line:5,column:24}},'5':{start:{line:6,column:16},end:{line:6,column:51}},'6':{start:{line:7,column:11},end:{line:7,column:37}},'7':{start:{line:8,column:14},end:{line:8,column:51}},'8':{start:{line:10,column:13},end:{line:10,column:30}},'9':{start:{line:11,column:14},end:{line:18,column:2}},'10':{start:{line:13,column:8},end:{line:13,column:48}},'11':{start:{line:16,column:8},end:{line:16,column:78}},'12':{start:{line:22,column:13},end:{line:24,column:8}},'13':{start:{line:27,column:0},end:{line:29,column:3}},'14':{start:{line:31,column:0},end:{line:39,column:3}},'15':{start:{line:32,column:4},end:{line:38,column:6}},'16':{start:{line:33,column:8},end:{line:37,column:10}},'17':{start:{line:40,column:0},end:{line:48,column:3}},'18':{start:{line:41,column:4},end:{line:47,column:6}},'19':{start:{line:42,column:8},end:{line:46,column:10}},'20':{start:{line:49,column:0},end:{line:83,column:3}},'21':{start:{line:50,column:4},end:{line:82,column:5}},'22':{start:{line:51,column:8},end:{line:79,column:11}},'23':{start:{line:52,column:30},end:{line:54,column:58}},'24':{start:{line:55,column:12},end:{line:78,column:15}},'25':{start:{line:81,column:8},end:{line:81,column:68}},'26':{start:{line:86,column:0},end:{line:113,column:3}},'27':{start:{line:87,column:4},end:{line:112,column:7}},'28':{start:{line:107,column:8},end:{line:107,column:54}},'29':{start:{line:108,column:8},end:{line:111,column:11}},'30':{start:{line:115,column:0},end:{line:130,column:3}},'31':{start:{line:116,column:4},end:{line:129,column:7}},'32':{start:{line:125,column:8},end:{line:128,column:11}},'33':{start:{line:132,column:0},end:{line:155,column:3}},'34':{start:{line:133,column:4},end:{line:154,column:7}},'35':{start:{line:134,column:8},end:{line:153,column:11}},'36':{start:{line:135,column:12},end:{line:135,column:43}},'37':{start:{line:136,column:12},end:{line:136,column:35}},'38':{start:{line:137,column:12},end:{line:152,column:14}},'39':{start:{line:144,column:16},end:{line:144,column:44}},'40':{start:{line:145,column:37},end:{line:145,column:68}},'41':{start:{line:146,column:16},end:{line:146,column:53}},'42':{start:{line:147,column:16},end:{line:151,column:18}},'43':{start:{line:157,column:0},end:{line:166,column:3}},'44':{start:{line:158,column:4},end:{line:165,column:7}},'45':{start:{line:159,column:23},end:{line:163,column:9}},'46':{start:{line:164,column:8},end:{line:164,column:27}},'47':{start:{line:168,column:0},end:{line:177,column:3}},'48':{start:{line:169,column:4},end:{line:169,column:64}},'49':{start:{line:170,column:4},end:{line:176,column:6}},'50':{start:{line:171,column:8},end:{line:175,column:10}},'51':{start:{line:179,column:0},end:{line:239,column:3}},'52':{start:{line:180,column:4},end:{line:238,column:7}},'53':{start:{line:183,column:8},end:{line:237,column:11}},'54':{start:{line:184,column:12},end:{line:236,column:13}},'55':{start:{line:185,column:16},end:{line:188,column:19}},'56':{start:{line:190,column:16},end:{line:235,column:19}},'57':{start:{line:206,column:20},end:{line:223,column:23}},'58':{start:{line:225,column:20},end:{line:229,column:26}},'59':{start:{line:231,column:20},end:{line:234,column:23}},'60':{start:{line:241,column:0},end:{line:256,column:3}},'61':{start:{line:242,column:4},end:{line:255,column:7}},'62':{start:{line:248,column:8},end:{line:254,column:11}},'63':{start:{line:249,column:12},end:{line:251,column:15}},'64':{start:{line:252,column:13},end:{line:254,column:11}},'65':{start:{line:262,column:0},end:{line:271,column:3}},'66':{start:{line:263,column:4},end:{line:263,column:39}},'67':{start:{line:264,column:4},end:{line:270,column:6}},'68':{start:{line:265,column:8},end:{line:269,column:10}},'69':{start:{line:272,column:0},end:{line:281,column:3}},'70':{start:{line:273,column:4},end:{line:273,column:43}},'71':{start:{line:274,column:4},end:{line:280,column:6}},'72':{start:{line:275,column:8},end:{line:279,column:10}},'73':{start:{line:282,column:0},end:{line:291,column:3}},'74':{start:{line:283,column:4},end:{line:283,column:44}},'75':{start:{line:284,column:4},end:{line:290,column:6}},'76':{start:{line:285,column:8},end:{line:289,column:10}},'77':{start:{line:292,column:0},end:{line:301,column:3}},'78':{start:{line:293,column:4},end:{line:293,column:41}},'79':{start:{line:294,column:4},end:{line:300,column:6}},'80':{start:{line:295,column:8},end:{line:299,column:10}},'81':{start:{line:303,column:0},end:{line:312,column:3}},'82':{start:{line:304,column:4},end:{line:304,column:51}},'83':{start:{line:305,column:4},end:{line:311,column:6}},'84':{start:{line:306,column:8},end:{line:310,column:10}},'85':{start:{line:314,column:0},end:{line:323,column:3}},'86':{start:{line:315,column:4},end:{line:315,column:75}},'87':{start:{line:316,column:4},end:{line:322,column:6}},'88':{start:{line:317,column:8},end:{line:321,column:10}},'89':{start:{line:325,column:0},end:{line:334,column:3}},'90':{start:{line:326,column:4},end:{line:326,column:71}},'91':{start:{line:327,column:4},end:{line:333,column:6}},'92':{start:{line:328,column:8},end:{line:332,column:10}},'93':{start:{line:336,column:0},end:{line:345,column:3}},'94':{start:{line:337,column:4},end:{line:337,column:45}},'95':{start:{line:338,column:4},end:{line:344,column:6}},'96':{start:{line:339,column:8},end:{line:343,column:10}},'97':{start:{line:347,column:0},end:{line:347,column:24}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:12,column:17},end:{line:12,column:18}},loc:{start:{line:12,column:48},end:{line:14,column:5}},line:12},'1':{name:'(anonymous_1)',decl:{start:{line:15,column:14},end:{line:15,column:15}},loc:{start:{line:15,column:45},end:{line:17,column:5}},line:15},'2':{name:'(anonymous_2)',decl:{start:{line:31,column:28},end:{line:31,column:29}},loc:{start:{line:31,column:48},end:{line:39,column:1}},line:31},'3':{name:'(anonymous_3)',decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:59},end:{line:38,column:5}},line:32},'4':{name:'(anonymous_4)',decl:{start:{line:40,column:30},end:{line:40,column:31}},loc:{start:{line:40,column:50},end:{line:48,column:1}},line:40},'5':{name:'(anonymous_5)',decl:{start:{line:41,column:30},end:{line:41,column:31}},loc:{start:{line:41,column:44},end:{line:47,column:5}},line:41},'6':{name:'(anonymous_6)',decl:{start:{line:49,column:28},end:{line:49,column:29}},loc:{start:{line:49,column:48},end:{line:83,column:1}},line:49},'7':{name:'(anonymous_7)',decl:{start:{line:51,column:51},end:{line:51,column:52}},loc:{start:{line:51,column:67},end:{line:79,column:9}},line:51},'8':{name:'(anonymous_8)',decl:{start:{line:86,column:34},end:{line:86,column:35}},loc:{start:{line:86,column:54},end:{line:113,column:1}},line:86},'9':{name:'(anonymous_9)',decl:{start:{line:106,column:12},end:{line:106,column:13}},loc:{start:{line:106,column:24},end:{line:112,column:5}},line:106},'10':{name:'(anonymous_10)',decl:{start:{line:115,column:34},end:{line:115,column:35}},loc:{start:{line:115,column:54},end:{line:130,column:1}},line:115},'11':{name:'(anonymous_11)',decl:{start:{line:124,column:12},end:{line:124,column:13}},loc:{start:{line:124,column:24},end:{line:129,column:5}},line:124},'12':{name:'(anonymous_12)',decl:{start:{line:132,column:22},end:{line:132,column:23}},loc:{start:{line:132,column:42},end:{line:155,column:1}},line:132},'13':{name:'(anonymous_13)',decl:{start:{line:133,column:21},end:{line:133,column:22}},loc:{start:{line:133,column:33},end:{line:154,column:5}},line:133},'14':{name:'(anonymous_14)',decl:{start:{line:134,column:54},end:{line:134,column:55}},loc:{start:{line:134,column:70},end:{line:153,column:9}},line:134},'15':{name:'(anonymous_15)',decl:{start:{line:143,column:20},end:{line:143,column:21}},loc:{start:{line:143,column:32},end:{line:152,column:13}},line:143},'16':{name:'(anonymous_16)',decl:{start:{line:157,column:27},end:{line:157,column:28}},loc:{start:{line:157,column:47},end:{line:166,column:1}},line:157},'17':{name:'(anonymous_17)',decl:{start:{line:158,column:28},end:{line:158,column:29}},loc:{start:{line:158,column:37},end:{line:165,column:5}},line:158},'18':{name:'(anonymous_18)',decl:{start:{line:168,column:37},end:{line:168,column:38}},loc:{start:{line:168,column:56},end:{line:177,column:1}},line:168},'19':{name:'(anonymous_19)',decl:{start:{line:170,column:56},end:{line:170,column:57}},loc:{start:{line:170,column:70},end:{line:176,column:5}},line:170},'20':{name:'(anonymous_20)',decl:{start:{line:179,column:24},end:{line:179,column:25}},loc:{start:{line:179,column:44},end:{line:239,column:1}},line:179},'21':{name:'(anonymous_21)',decl:{start:{line:182,column:12},end:{line:182,column:13}},loc:{start:{line:182,column:24},end:{line:238,column:5}},line:182},'22':{name:'(anonymous_22)',decl:{start:{line:183,column:51},end:{line:183,column:52}},loc:{start:{line:183,column:69},end:{line:237,column:9}},line:183},'23':{name:'(anonymous_23)',decl:{start:{line:205,column:24},end:{line:205,column:25}},loc:{start:{line:205,column:36},end:{line:235,column:17}},line:205},'24':{name:'(anonymous_24)',decl:{start:{line:241,column:30},end:{line:241,column:31}},loc:{start:{line:241,column:50},end:{line:256,column:1}},line:241},'25':{name:'(anonymous_25)',decl:{start:{line:247,column:12},end:{line:247,column:13}},loc:{start:{line:247,column:22},end:{line:255,column:5}},line:247},'26':{name:'(anonymous_26)',decl:{start:{line:262,column:35},end:{line:262,column:36}},loc:{start:{line:262,column:54},end:{line:271,column:1}},line:262},'27':{name:'(anonymous_27)',decl:{start:{line:264,column:36},end:{line:264,column:37}},loc:{start:{line:264,column:50},end:{line:270,column:5}},line:264},'28':{name:'(anonymous_28)',decl:{start:{line:272,column:39},end:{line:272,column:40}},loc:{start:{line:272,column:58},end:{line:281,column:1}},line:272},'29':{name:'(anonymous_29)',decl:{start:{line:274,column:40},end:{line:274,column:41}},loc:{start:{line:274,column:54},end:{line:280,column:5}},line:274},'30':{name:'(anonymous_30)',decl:{start:{line:282,column:40},end:{line:282,column:41}},loc:{start:{line:282,column:59},end:{line:291,column:1}},line:282},'31':{name:'(anonymous_31)',decl:{start:{line:284,column:41},end:{line:284,column:42}},loc:{start:{line:284,column:55},end:{line:290,column:5}},line:284},'32':{name:'(anonymous_32)',decl:{start:{line:292,column:37},end:{line:292,column:38}},loc:{start:{line:292,column:56},end:{line:301,column:1}},line:292},'33':{name:'(anonymous_33)',decl:{start:{line:294,column:38},end:{line:294,column:39}},loc:{start:{line:294,column:52},end:{line:300,column:5}},line:294},'34':{name:'(anonymous_34)',decl:{start:{line:303,column:42},end:{line:303,column:43}},loc:{start:{line:303,column:61},end:{line:312,column:1}},line:303},'35':{name:'(anonymous_35)',decl:{start:{line:305,column:42},end:{line:305,column:43}},loc:{start:{line:305,column:56},end:{line:311,column:5}},line:305},'36':{name:'(anonymous_36)',decl:{start:{line:314,column:45},end:{line:314,column:46}},loc:{start:{line:314,column:64},end:{line:323,column:1}},line:314},'37':{name:'(anonymous_37)',decl:{start:{line:316,column:65},end:{line:316,column:66}},loc:{start:{line:316,column:79},end:{line:322,column:5}},line:316},'38':{name:'(anonymous_38)',decl:{start:{line:325,column:44},end:{line:325,column:45}},loc:{start:{line:325,column:63},end:{line:334,column:1}},line:325},'39':{name:'(anonymous_39)',decl:{start:{line:327,column:61},end:{line:327,column:62}},loc:{start:{line:327,column:75},end:{line:333,column:5}},line:327},'40':{name:'(anonymous_40)',decl:{start:{line:336,column:36},end:{line:336,column:37}},loc:{start:{line:336,column:55},end:{line:345,column:1}},line:336},'41':{name:'(anonymous_41)',decl:{start:{line:338,column:36},end:{line:338,column:37}},loc:{start:{line:338,column:50},end:{line:344,column:5}},line:338}},branchMap:{'0':{loc:{start:{line:50,column:4},end:{line:82,column:5}},type:'if',locations:[{start:{line:50,column:4},end:{line:82,column:5}},{start:{line:50,column:4},end:{line:82,column:5}}],line:50},'1':{loc:{start:{line:52,column:30},end:{line:54,column:58}},type:'cond-expr',locations:[{start:{line:52,column:45},end:{line:52,column:46}},{start:{line:53,column:32},end:{line:54,column:58}}],line:52},'2':{loc:{start:{line:53,column:32},end:{line:54,column:58}},type:'cond-expr',locations:[{start:{line:53,column:49},end:{line:53,column:50}},{start:{line:54,column:36},end:{line:54,column:58}}],line:53},'3':{loc:{start:{line:54,column:36},end:{line:54,column:58}},type:'cond-expr',locations:[{start:{line:54,column:53},end:{line:54,column:54}},{start:{line:54,column:57},end:{line:54,column:58}}],line:54},'4':{loc:{start:{line:184,column:12},end:{line:236,column:13}},type:'if',locations:[{start:{line:184,column:12},end:{line:236,column:13}},{start:{line:184,column:12},end:{line:236,column:13}}],line:184},'5':{loc:{start:{line:248,column:8},end:{line:254,column:11}},type:'if',locations:[{start:{line:248,column:8},end:{line:254,column:11}},{start:{line:248,column:8},end:{line:254,column:11}}],line:248}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0,'75':0,'76':0,'77':0,'78':0,'79':0,'80':0,'81':0,'82':0,'83':0,'84':0,'85':0,'86':0,'87':0,'88':0,'89':0,'90':0,'91':0,'92':0,'93':0,'94':0,'95':0,'96':0,'97':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var router=(cov_1r94utadfy.s[0]++,require('express').Router());var models=(cov_1r94utadfy.s[1]++,require('../../models'));//require toiws file index.js cuar thuw mucj
var log=(cov_1r94utadfy.s[2]++,require('../../config/config')["log"]);var md5=(cov_1r94utadfy.s[3]++,require('md5'));const fs=(cov_1r94utadfy.s[4]++,require('fs'));var sendEmail=(cov_1r94utadfy.s[5]++,require('../../notification/email'));var auto=(cov_1r94utadfy.s[6]++,require('../../automatic'));var desktop=(cov_1r94utadfy.s[7]++,require('../../notification/desktop'));// Upload file setting
var multer=(cov_1r94utadfy.s[8]++,require('multer'));var storage=(cov_1r94utadfy.s[9]++,multer.diskStorage({destination:function(req,file,callback){cov_1r94utadfy.f[0]++;cov_1r94utadfy.s[10]++;callback(null,'./client/img/profiles');},filename:function(req,file,callback){cov_1r94utadfy.f[1]++;cov_1r94utadfy.s[11]++;callback(null,file.fieldname+'-'+Date.now()+file.originalname);}}));// var upload = multer({
//     storage: storage
// }).single('userPhoto');
var upload=(cov_1r94utadfy.s[12]++,multer({storage:storage}).any());// generate table to mysql
cov_1r94utadfy.s[13]++;models.User.sync({force:false});cov_1r94utadfy.s[14]++;router.post('/getUserById',function(req,res){cov_1r94utadfy.f[2]++;cov_1r94utadfy.s[15]++;models.User.getUserByUserID(req.body.id,function(rs){cov_1r94utadfy.f[3]++;cov_1r94utadfy.s[16]++;res.send({success:true,msg:"send user info",data:rs});});});cov_1r94utadfy.s[17]++;router.post('/getAllTrainer',function(req,res){cov_1r94utadfy.f[4]++;cov_1r94utadfy.s[18]++;models.User.getAllTrainer(function(rs){cov_1r94utadfy.f[5]++;cov_1r94utadfy.s[19]++;res.send({success:true,msg:"send trainer list",data:rs});});});cov_1r94utadfy.s[20]++;router.post('/getUserInfo',function(req,res){cov_1r94utadfy.f[6]++;cov_1r94utadfy.s[21]++;if(req.cookies.email===req.decoded.email){cov_1r94utadfy.b[0][0]++;cov_1r94utadfy.s[22]++;models.User.getUserByEmail(req.body.email,function(user){cov_1r94utadfy.f[7]++;var currentRole=(cov_1r94utadfy.s[23]++,user.isAdmin?(cov_1r94utadfy.b[1][0]++,1):(cov_1r94utadfy.b[1][1]++,user.isTrainer?(cov_1r94utadfy.b[2][0]++,2):(cov_1r94utadfy.b[2][1]++,user.isTrainee?(cov_1r94utadfy.b[3][0]++,3):(cov_1r94utadfy.b[3][1]++,0))));cov_1r94utadfy.s[24]++;res.send({id:user.id,username:user.username,status:user.status,dob:user.dob,phone:user.phone,location:user.location,email:user.email,password:user.password,avatar:user.avatar,role:currentRole,isAdmin:user.isAdmin,isTrainer:user.isTrainer,isTrainee:user.isTrainee,belong2Team:user.belong2Team,isExperienced:user.isExperienced,userType:user.userType,success:true,getCurrentRole:true,isNotificationDesktop:user.isNotificationDesktop,isNotificationEmail:user.isNotificationEmail,EmailPeriod:user.EmailPeriod,TimeOption:user.TimeOption});});}else{cov_1r94utadfy.b[0][1]++;cov_1r94utadfy.s[25]++;res.status(403).send('Something wrong with Authentication');}});cov_1r94utadfy.s[26]++;router.post('/updateUserProfile',function(req,res){cov_1r94utadfy.f[8]++;cov_1r94utadfy.s[27]++;models.User.update({username:req.body.username,avatar:req.body.avatar,dob:req.body.dob,phone:req.body.phone,status:req.body.status,isNotificationDesktop:req.body.isNotificationDesktop,isNotificationEmail:req.body.isNotificationEmail,isAdmin:req.body.isAdmin,isTrainer:req.body.isTrainer,belong2Team:req.body.belong2Team,isExperienced:req.body.isExperienced,userType:req.body.userType,EmailPeriod:req.body.EmailPeriod,TimeOption:req.body.TimeOption},{where:{email:req.body.email}}).then(function(){cov_1r94utadfy.f[9]++;cov_1r94utadfy.s[28]++;auto.job_sendEmail.updateJobs(req.body.email);cov_1r94utadfy.s[29]++;res.send({success:true,msg:"Update your profile Success"});});});cov_1r94utadfy.s[30]++;router.post('/changePasswordMD5',function(req,res){cov_1r94utadfy.f[10]++;cov_1r94utadfy.s[31]++;models.User.update({password:md5(req.body.password),status:'activated',isTrainee:true},{where:{email:req.body.email}}).then(function(){cov_1r94utadfy.f[11]++;cov_1r94utadfy.s[32]++;res.send({success:true,msg:"Update Your Password Success"});});});cov_1r94utadfy.s[33]++;router.post('/photo',function(req,res){cov_1r94utadfy.f[12]++;cov_1r94utadfy.s[34]++;upload(req,res,function(){cov_1r94utadfy.f[13]++;cov_1r94utadfy.s[35]++;models.User.getUserByEmail(req.headers.email,function(user){cov_1r94utadfy.f[14]++;cov_1r94utadfy.s[36]++;console.log(req.headers.email);cov_1r94utadfy.s[37]++;console.log(req.files);cov_1r94utadfy.s[38]++;models.User.update({avatar:'/img/profiles/'+req.files[0].filename},{where:{email:req.headers.email}}).then(function(){cov_1r94utadfy.f[15]++;cov_1r94utadfy.s[39]++;console.log("upload photo");var previousAvatar=(cov_1r94utadfy.s[40]++,user._previousDataValues.avatar);cov_1r94utadfy.s[41]++;fs.unlink('client'+previousAvatar);cov_1r94utadfy.s[42]++;res.json({success:true,message:'Upload successful',link:'/img/profiles/'+req.files[0].filename});});});});});//phuong thuwcs get pharn hooif mootj GET Request vef /getAllUsers page
cov_1r94utadfy.s[43]++;router.get('/getAllUsers',function(req,res){cov_1r94utadfy.f[16]++;cov_1r94utadfy.s[44]++;models.User.getAllUsers(users=>{cov_1r94utadfy.f[17]++;var dataSend=(cov_1r94utadfy.s[45]++,{success:true,msg:'successfully sent',data:users});cov_1r94utadfy.s[46]++;res.send(dataSend);//client goij get toiws /user/userProfile/getAllUsers, phuowng thuwcs trar veef dataSend
});});cov_1r94utadfy.s[47]++;router.post('/getAllUserByCourseID',function(req,res){cov_1r94utadfy.f[18]++;cov_1r94utadfy.s[48]++;console.log("getAllUserByCourseID API: "+req.body.courseID);cov_1r94utadfy.s[49]++;models.User.getAllUserByCourseID(req.body.courseID,function(rs){cov_1r94utadfy.f[19]++;cov_1r94utadfy.s[50]++;res.send({success:true,msg:"send user by courseID",data:rs});});});cov_1r94utadfy.s[51]++;router.post('/addUser',function(req,res){cov_1r94utadfy.f[20]++;cov_1r94utadfy.s[52]++;models.User.sync({force:false}).then(function(){cov_1r94utadfy.f[21]++;cov_1r94utadfy.s[53]++;models.User.getUserByEmail(req.body.email,function(result){cov_1r94utadfy.f[22]++;cov_1r94utadfy.s[54]++;if(result){cov_1r94utadfy.b[4][0]++;cov_1r94utadfy.s[55]++;res.send({success:false,msg:'Email already existed. Add failed!'});}else{cov_1r94utadfy.b[4][1]++;cov_1r94utadfy.s[56]++;models.User.create({username:req.body.username,status:'newuser',dob:'01/01/2001',phone:'0000 000 000',location:'DEK Vietnam',email:req.body.email,password:md5(req.body.password),avatar:'/img/profiles/defaultProfile.jpg',isAdmin:false,isTrainer:false,isTrainee:false,belong2Team:req.body.team,isExperienced:0,userType:req.body.userType}).then(function(){cov_1r94utadfy.f[23]++;cov_1r94utadfy.s[57]++;models.User.update({username:req.body.username,avatar:'/img/profiles/defaultProfile.jpg',dob:'01/01/2001',phone:'0000 000 000',status:'newuser',isNotificationDesktop:true,isNotificationEmail:true,isAdmin:false,isTrainer:false,isExperienced:false,EmailPeriod:'Daily',TimeOption:req.body.TimeOption},{where:{email:req.body.email}});cov_1r94utadfy.s[58]++;sendEmail.send([req.body.email],"Register - Account Information",{username:req.body.username,email:req.body.email,password:req.body.password},3);cov_1r94utadfy.s[59]++;res.send({success:true,msg:"Register New User Successfully"});});}});});});cov_1r94utadfy.s[60]++;router.post('/checkPassword',function(req,res){cov_1r94utadfy.f[24]++;cov_1r94utadfy.s[61]++;models.User.findOne({where:{email:req.body.email,password:md5(req.body.password)}}).then(result=>{cov_1r94utadfy.f[25]++;cov_1r94utadfy.s[62]++;if(result){cov_1r94utadfy.b[5][0]++;cov_1r94utadfy.s[63]++;res.send({success:true});}else{cov_1r94utadfy.b[5][1]++;cov_1r94utadfy.s[64]++;res.send({success:false});}});});// --------------------------------------------------------------- TL Team - Ngoc Thanh -------------------------------------------------------
cov_1r94utadfy.s[65]++;router.get('/getUserDontFeedback',function(req,res){cov_1r94utadfy.f[26]++;cov_1r94utadfy.s[66]++;console.log("getUserDontFeedback");cov_1r94utadfy.s[67]++;models.User.getUserDontFeedback(function(rs){cov_1r94utadfy.f[27]++;cov_1r94utadfy.s[68]++;res.send({success:true,msg:"get user don't feedback in all class",data:rs});});});cov_1r94utadfy.s[69]++;router.get('/getUserMaxRatingTrainer',function(req,res){cov_1r94utadfy.f[28]++;cov_1r94utadfy.s[70]++;console.log("getUserMaxRatingTrainer");cov_1r94utadfy.s[71]++;models.User.getUserMaxRatingTrainer(function(rs){cov_1r94utadfy.f[29]++;cov_1r94utadfy.s[72]++;res.send({success:true,msg:"get user vote max ratig for trainer in all class",data:rs});});});cov_1r94utadfy.s[73]++;router.get('/getUserMaxRatingContents',function(req,res){cov_1r94utadfy.f[30]++;cov_1r94utadfy.s[74]++;console.log("getUserMaxRatingContents");cov_1r94utadfy.s[75]++;models.User.getUserMaxRatingContents(function(rs){cov_1r94utadfy.f[31]++;cov_1r94utadfy.s[76]++;res.send({success:true,msg:"get user vote max rating for contents in all class",data:rs});});});cov_1r94utadfy.s[77]++;router.get('/getUserMaxRatingHappy',function(req,res){cov_1r94utadfy.f[32]++;cov_1r94utadfy.s[78]++;console.log("getUserMaxRatingHappy");cov_1r94utadfy.s[79]++;models.User.getUserMaxRatingHappy(function(rs){cov_1r94utadfy.f[33]++;cov_1r94utadfy.s[80]++;res.send({success:true,msg:"get user vote max rating for happy in all class",data:rs});});});cov_1r94utadfy.s[81]++;router.post('/getUserHaveImproveComment',function(req,res){cov_1r94utadfy.f[34]++;cov_1r94utadfy.s[82]++;console.log("getUserHaveImproveComment API: ");cov_1r94utadfy.s[83]++;models.User.getUserHaveImproveComment(function(rs){cov_1r94utadfy.f[35]++;cov_1r94utadfy.s[84]++;res.send({success:true,msg:"get all user id if they have improve comment",data:rs});});});cov_1r94utadfy.s[85]++;router.post('/getUserDontFeedbackByCourseID',function(req,res){cov_1r94utadfy.f[36]++;cov_1r94utadfy.s[86]++;console.log("getUserDontFeedbackByCourseID API: "+req.body.courseID);cov_1r94utadfy.s[87]++;models.User.getUserDontFeedbackByCourseID(req.body.courseID,function(rs){cov_1r94utadfy.f[37]++;cov_1r94utadfy.s[88]++;res.send({success:true,msg:"get all user if they don't feedback course with course id",data:rs});});});cov_1r94utadfy.s[89]++;router.post('/getAllUserDontLearnByTeamID',function(req,res){cov_1r94utadfy.f[38]++;cov_1r94utadfy.s[90]++;console.log("getAllUserDontLearnByTeamID API: "+req.body.teamID);cov_1r94utadfy.s[91]++;models.User.getAllUserDontLearnByTeamID(req.body.teamID,function(rs){cov_1r94utadfy.f[39]++;cov_1r94utadfy.s[92]++;res.send({success:true,msg:"Get all user by team id",data:rs});});});cov_1r94utadfy.s[93]++;router.post('/getAllUserOfAllTeam',function(req,res){cov_1r94utadfy.f[40]++;cov_1r94utadfy.s[94]++;console.log("getAllUserOfAllTeam API: ");cov_1r94utadfy.s[95]++;models.User.getAllUserOfAllTeam(function(rs){cov_1r94utadfy.f[41]++;cov_1r94utadfy.s[96]++;res.send({success:true,msg:"Get all user of team id",data:rs});});});cov_1r94utadfy.s[97]++;module.exports=router;